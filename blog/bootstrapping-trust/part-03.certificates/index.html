<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Bootstrapping Trust | OpenZiti</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openziti.github.io/blog/bootstrapping-trust/part-03.certificates"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Bootstrapping Trust | OpenZiti"><meta data-rh="true" name="description" content="Part 3: Certificates"><meta data-rh="true" property="og:description" content="Part 3: Certificates"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-12-20T21:26:26.000Z"><meta data-rh="true" property="article:author" content="https://github.com/andrewpmartinez"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openziti.github.io/blog/bootstrapping-trust/part-03.certificates"><link data-rh="true" rel="alternate" href="https://openziti.github.io/blog/bootstrapping-trust/part-03.certificates" hreflang="en"><link data-rh="true" rel="alternate" href="https://openziti.github.io/blog/bootstrapping-trust/part-03.certificates" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EXWPKK5PV4-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenZiti RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenZiti Atom Feed">


<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-THVRRJ3GLE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-THVRRJ3GLE",{anonymize_ip:!0})</script>




<link rel="search" type="application/opensearchdescription+xml" title="OpenZiti" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.d79fd695.css">
<link rel="preload" href="/assets/js/runtime~main.454400fc.js" as="script">
<link rel="preload" href="/assets/js/main.e41a253f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="root_VOM9"><span style="color:whitesmoke">Star us on GitHub </span><span style="height:20px"><span><a href="https://github.com/openziti/ziti" data-icon="octicon-star" data-show-count="true" aria-label="Star buttons/github-buttons on GitHub">Star</a></span></span></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ziti-logo-dark.svg" alt="OpenZiti Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ziti-logo-light.svg" alt="OpenZiti Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/introduction/">Docs</a><a class="navbar__item navbar__link" href="/api/">APIs</a><a class="navbar__item navbar__link" href="/guides/">Guides</a><a class="navbar__item navbar__link" href="/glossary/">Glossary</a><a class="navbar__item navbar__link" href="/operations/controller">Ops</a></div><div class="navbar__items navbar__items--right"><a href="https://openziti.discourse.group/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discourse-link"></a><a href="https://github.com/openziti/ziti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_eExm"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/articles">Articles</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/c-sdk-on-beaglebone">Building the Ziti C SDK and Sample Apps for arm (BeagleBone)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/bootstrapping-trust/part-01.encryption-everywhere">Bootstrapping Trust</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/bootstrapping-trust/part-02.a-primer-on-public-key-cryptography">Bootstrapping Trust</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/bootstrapping-trust/part-03.certificates">Bootstrapping Trust</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Bootstrapping Trust</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-12-20T21:26:26.000Z" itemprop="datePublished">December 20, 2022</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/andrewpmartinez" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/199856?v=4" alt="Andrew Martinez"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/andrewpmartinez" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Andrew Martinez</span></a></div><small class="avatar__subtitle" itemprop="description">OpenZiti Maintainer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-3-certificates">Part 3: Certificates<a class="hash-link" href="#part-3-certificates" title="Direct link to heading">​</a></h2><p>If you have read through the entire series up to here, welcome! If you
have not, please consider reading the whole series:</p><ul><li><a href="/blog/bootstrapping-trust/part-01.encryption-everywhere">Part 1: Encryption Everywhere</a></li><li><a href="/blog/bootstrapping-trust/part-02.a-primer-on-public-key-cryptography">Part 2: A Primer On Public-Key Cryptography</a></li><li><a href="/blog/bootstrapping-trust/part-03.certificates">Part 3: Certificates</a></li><li><a href="/blog/bootstrapping-trust/part-04.certificate-authorities-and-chains-of-trust">Part 4: Certificate Authorities &amp; Chains Of Trust</a></li><li><a href="/blog/bootstrapping-trust/part-05.bootstrapping-trust">Part 5: Bootstrapping Trust</a></li></ul><p>In the series, we have covered public-key cryptography, where we learned
about public keys, private keys, and their uses for encryption and
signing. Using keys to sign data will play an essential role in this
article. It is vital that the reader understand that signatures verify
both the content of the data and its source. For a refresher, see
<a href="/blog/bootstrapping-trust/part-02.a-primer-on-public-key-cryptography">part two</a> of this
series.</p><p>This article covers how certificates and certificate authorities (CAs)
work as &quot;trust anchors.&quot; When a CA is a trust anchor, it means that a
system can trust the CA to sign certificates that it can, in turn,
trust. Throughout this entire article, &quot;trusting certificates&quot; is
mentioned. Trusting a certificate (CA or otherwise) is a software or
operating system configuration process. This configuration tells the
system that the specified certificates are trustworthy in the eyes of
the operator.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="certificates">Certificates<a class="hash-link" href="#certificates" title="Direct link to heading">​</a></h3><p>Part two of this series covered keys, both public and private, but did
not mention certificates. It is common to hear &quot;certificate&quot; used
interchangeably with &quot;public key&quot; and, sometimes, &quot;private key.&quot; A
certificate must have the public key inside of it. Some storage formats
allow certificates to be stored along with the matching private key.
One example of this is PFX files. PFX files, which are PKCS#12 archives,
are also sometimes generically referred to as a &quot;certificates&quot;. In this
article &quot;certificate&quot; will always mean an x509 certificate that contains
only the public key.</p><p>Certificates are a simple concept, but years of expansions and
extensions have added to them and can be daunting uninitiated when you
get into the nitty-gritty details. This article will strive to sit above
that detail. If you venture into the realm of generating certificates,
using OpenSSL and its configuration files, it can be a cumbersome
experience to wade through. There are many great articles and tutorials
available to get you started.</p><p>For this article, the word &quot;certificate&quot; will mean an &quot;x509
Certificate&quot;. x509 is a public standard and is the de-facto standard for
software systems dealing with public-key cryptography. There are other
formats, but they are usually environment-specific, such as Card
Verifiable Certificates. x509 good enough for general purpose use on
most systems.</p><p>So, what is a certificate? It is yet another blob of data that is
specially formatted. It can be stored anywhere data can be stored but is
usually a file. For this conversation, we will focus on the following
subset of information that a certificate contains:</p><ul><li>Subject information<ul><li>A public key</li><li>Distinguished Name</li></ul></li><li>Issuer Information</li><li>Validity Period</li><li>Usage/Extensions</li><li>Signatures</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="subject-information">Subject Information<a class="hash-link" href="#subject-information" title="Direct link to heading">​</a></h4><p>Certificates contain more than keys. The Distinguished Name (DN) are
text fields. They are useful mainly to humans to know what/who owns a
certificate. It is sometimes used by software as display information or
for comparison checks. Since humans provide the DN values or configure
software with values, it is not always distinguishing. DN values have an
alternate name: relatively distinguished names.</p><p>Related to the Subject DN is the Issuer Information. The Issuer
Information is the subject of the certificate that issued the
certificate. Because of this, both the issuer information has similar
values to the subject DN. Both can include the following information:</p><ul><li>CN - common name - a name</li><li>SN - surname</li><li>SERIALNUMBER - a number that is usually unique per certificate issuer,
but not always</li><li>C - country</li><li>L - locality name</li><li>ST or S - state or province</li><li>STREET - street address</li><li>O - organization name</li><li>OU - organizational unit</li><li>T - title</li><li>G or GN - given name</li><li>E - email address</li><li>UID - user id</li><li>DC - domain component</li></ul><p>Do not worry about memorizing that list. Simply knowing they exist and
that they may or may not matter is good enough for now. If the reader is
wondering when they might matter, well, that is generally when the
system you are using complains about them.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="validity-period">Validity Period<a class="hash-link" href="#validity-period" title="Direct link to heading">​</a></h4><p>The Validity Period specifies two points in time from when the
certificate is valid. Before and after this window of time, the
certificate is invalid and should not be trusted. Validity periods
should be as small as possible to fit their use case. Shorter periods
reduce the window of time that compromised private key can remain useful
for an attack. The cost of this is overhead reissuing certificates as
they reach the end of their validity period.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="usageextensions">Usage/Extensions<a class="hash-link" href="#usageextensions" title="Direct link to heading">​</a></h4><p>Usage/Extension Data is interesting because it can limit what roles a
certificate fulfills. Depending on the system, this may be adhered to or
not. Some examples of usage that are common to see:</p><ul><li>key usage: client authentication, server authentication, signatures,
etc.</li><li>Subject Alternate Names (SANs)<ul><li>Limits what IP address, email address, domain name, etc. the
certificate can be associated with</li></ul></li><li>Certificate Authority (CA) flag</li><li>and more</li></ul><p>This series will not dive into the details of these usages. However, it
is essential to be aware of them and that they can affect the roles a
certificate can fulfill.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="signatures">Signatures<a class="hash-link" href="#signatures" title="Direct link to heading">​</a></h4><p>The signature section of a certificate is a list of signatures from
other entities that trust this certificate. A certificate that signs
itself is a &quot;self-signed certificate.&quot; Self-signed certificates must be
individually trusted as no other certificate has expressed trust in it
by signing it. Self-signed certificates are sometimes used for testing
purposes as they are easy to create. They are also used as Root
Certificate Authorities (root CAs).</p><p>Each signature on a certificate is the result of taking the contents of
the certificate (without signatures), one-way hashing it, and then
encrypting the hash with the signator&#x27;s private key. The result is
appended to the end of the signature list. During this process, the
public certificate moves between systems to be signed.</p><p>The movement of the public certificate between systems is facilitated by
Certificate Signing Requests (CSRs). CSRs can be transmitted
electronically as files or as a data stream to the signer. CSRs contain
only the public information of a certificate and a signature from the
certificate&#x27;s private key. Since CSRs only contain public information,
they are not considered sensitive. The signature in a CSR allows the
signer to verify that the CSR is from the subject specified in the CSR.
If the signature is valid, the signator processes the CSR, and the
result is a newly minted certificate with an additional signature.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">​</a></h3><p>Certificates are keys, usually public ones, with additional metadata
that adds conventions and restrictions around certificate usages. They
provide a place for signatures to resides and, through CSRs, provide a
vehicle to request additional signatures. Certificates are useful
because they package all of these concerns into a neat single file. In
<a href="/blog/bootstrapping-trust/part-04.certificate-authorities-and-chains-of-trust">part four</a>, we
will explore how to create a formidable chain of trust by linking
multiple certificates together.</p><hr><p>Written By: Andrew Martinez<br>
<!-- -->June 2020</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/bootstrapping-trust/part-02.a-primer-on-public-key-cryptography"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Bootstrapping Trust</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/bootstrapping-trust/part-04.certificate-authorities-and-chains-of-trust"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Bootstrapping Trust</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#part-3-certificates" class="table-of-contents__link toc-highlight">Part 3: Certificates</a><ul><li><a href="#certificates" class="table-of-contents__link toc-highlight">Certificates</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 NetFoundry Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.454400fc.js"></script>
<script src="/assets/js/main.e41a253f.js"></script>
</body>
</html>