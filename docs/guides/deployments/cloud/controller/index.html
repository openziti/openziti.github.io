<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/deployments/cloud/controller" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Run a Controller in a Public Cloud | OpenZiti</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openziti.io/docs/guides/deployments/cloud/controller"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="robots" content="index, follow"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Run a Controller in a Public Cloud | OpenZiti"><meta data-rh="true" name="description" content="1.1 Create a VM to be used as the Controller"><meta data-rh="true" property="og:description" content="1.1 Create a VM to be used as the Controller"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openziti.io/docs/guides/deployments/cloud/controller"><link data-rh="true" rel="alternate" href="https://openziti.io/docs/guides/deployments/cloud/controller" hreflang="en"><link data-rh="true" rel="alternate" href="https://openziti.io/docs/guides/deployments/cloud/controller" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EXWPKK5PV4-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Deployments","item":"https://openziti.io/docs/category/deployments"},{"@type":"ListItem","position":2,"name":"Cloud","item":"https://openziti.io/docs/category/cloud"},{"@type":"ListItem","position":3,"name":"Controller","item":"https://openziti.io/docs/guides/deployments/cloud/controller"}]}</script><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-5SF399H3",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>





<link rel="search" type="application/opensearchdescription+xml" title="OpenZiti" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.90eb4e20.css">
<script src="/assets/js/runtime~main.fe2a4f25.js" defer="defer"></script>
<script src="/assets/js/main.74a96fdd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5SF399H3" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>




<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/ziti-logo-dark.svg"><link rel="preload" as="image" href="/img/ziti-logo-light.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="starUsRoot_Cir2"><span style="color:whitesmoke">Star us on GitHubÂ </span><span style="height:20px"><span><a href="https://github.com/openziti/ziti" data-icon="octicon-star" data-show-count="true" aria-label="Star buttons/github-buttons on GitHub">Star</a></span></span></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://openziti.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/ziti-logo-dark.svg" alt="The OpenZiti logo, an open source zero trust network overlay" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/ziti-logo-light.svg" alt="The OpenZiti logo, an open source zero trust network overlay" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item"><a class="navbar__item navbar__link header-netfoundry-link" href="https://netfoundry.io/products/netfoundry-cloud-30-day-free-trial/" target="_blank">NetFoundry</a></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/learn/introduction/">Documentation</a><a class="navbar__item navbar__link" href="/docs/downloads">Downloads</a><div class="navbar__item"><a class="navbar__item navbar__link header-netfoundry-link" href="https://blog.openziti.io/" target="_blank">Blog</a></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Links</a><ul class="dropdown__menu"><li class=""><div class="text-divider"><p>Socials</p></div></li><li class=""><a href="https://www.youtube.com/OpenZiti" target="_blank" title="OpenZiti on YouTube"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/yt.svg">YouTube</span></a></li><li class=""><a href="https://x.com/OpenZiti" target="_blank" title="OpenZiti on X(formerly Twitter)"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/twit.svg">X (Twitter)</span></a></li><li class=""><a href="https://www.reddit.com/r/openziti" target="_blank" title="OpenZiti Subreddit"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="//img/reddit-logo.png">Reddit</span></a></li><li class=""><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/ziggy.png"><a href="https://x.com/OpenZiggy" target="_blank" title="OpenZiggy on X(formerly Twitter)">Ziggy</a></span></li><li class=""><div class="text-divider"><p>Other</p></div></li><li class=""><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/blog-icon.png"><a href="https://blog.openziti.io/" target="_blank" title="Blog">Blog</a></span></li><li class=""><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/oz-test-kitchen.png"><a href="https://github.com/openziti-test-kitchen" target="_blank" title="Git project for the test kitchen">Test Kitchen</a></span></li></ul></div><a href="https://openziti.discourse.group/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discourse-link" title="Discourse"></a><a href="https://github.com/openziti/ziti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_eExm"><div class="wrapperDiv_MU_d"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><a class="menu__link" href="/docs/learn/introduction/">LEARN</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/learn/introduction/">What is OpenZiti?</a><button aria-label="Expand sidebar category &#x27;What is OpenZiti?&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/learn/quickstarts/">Quickstarts</a><button aria-label="Expand sidebar category &#x27;Quickstarts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/core-concepts">Core Concepts</a><button aria-label="Expand sidebar category &#x27;Core Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learn/identity-providers/">Identity Providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><a class="menu__link" href="/docs/reference/">REFERENCE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/reference/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/reference/configuration/conventions">Configuration</a><button aria-label="Expand sidebar category &#x27;Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/reference/ha/overview">Controller Clustering</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/reference/tunnelers/">Tunnelers</a><button aria-label="Expand sidebar category &#x27;Tunnelers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/reference/command-line/login">CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/reference/logging">Logging</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/reference/config-types/">Config Types</a><button aria-label="Expand sidebar category &#x27;Config Types&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/reference/events">Events</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/reference/developer/">Developer</a><button aria-label="Expand sidebar category &#x27;Developer&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/reference/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><a class="menu__link" href="/docs/guides/">GUIDES</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/deployments">Deployments</a><button aria-label="Collapse sidebar category &#x27;Deployments&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/linux">Linux</a><button aria-label="Expand sidebar category &#x27;Linux&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/docker">Docker</a><button aria-label="Expand sidebar category &#x27;Docker&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/kubernetes">Kubernetes</a><button aria-label="Expand sidebar category &#x27;Kubernetes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/cloud">Cloud</a><button aria-label="Collapse sidebar category &#x27;Cloud&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/deployments/cloud/controller">Controller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/deployments/cloud/router">Router</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/deployments/console">Alternative Server Certificates</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guides/external-auth/">Configuring OIDC</a><button aria-label="Expand sidebar category &#x27;Configuring OIDC&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guides/hsm/">Hardware Keys</a><button aria-label="Expand sidebar category &#x27;Hardware Keys&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/topologies">Topologies</a><button aria-label="Expand sidebar category &#x27;Topologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/troubleshooting">Troubleshooting</a><button aria-label="Expand sidebar category &#x27;Troubleshooting&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/deployments"><span>Deployments</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/cloud"><span>Cloud</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Controller</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Run a Controller in a Public Cloud</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-create-a-vm-to-be-used-as-the-controller">1.1 Create a VM to be used as the Controller<a href="#11-create-a-vm-to-be-used-as-the-controller" class="hash-link" aria-label="Direct link to 1.1 Create a VM to be used as the Controller" title="Direct link to 1.1 Create a VM to be used as the Controller">â</a></h2>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Azure</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Google</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Digital Ocean</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Oracle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">IBM</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><ul>
<li>It is easier to use <strong>resource group</strong> to organize and manage all your resources for this demo.</li>
<li>Create a <strong>resource group</strong> and change into that resource group.</li>
<li>Use <strong>+ Create</strong> button to create a resource.</li>
<li>Azure will take you to the <strong>Marketplace</strong> screen. In the search bar, type in <strong>Ubuntu Server</strong>.</li>
<li>Choose &quot;<strong>Ubuntu Server 22.04 LTS</strong>&quot;.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-Azure1-ddb22c1cba5fdde0eba7163f28aa827b.jpg" width="1091" height="585" class="img_ev3q"></p><p>On the <strong>Create a virtual machine</strong> screen.</p><ul>
<li>The <strong>Subscription</strong> and <strong>Resource group</strong> should already be filled.</li>
<li>In the <strong>Instance details</strong> section, enter the <strong>VM name</strong>.</li>
<li>Select the <strong>Region</strong> to host your VM.</li>
<li>Leave default <strong>Availability options</strong> and <strong>Security type</strong>(Standard).</li>
<li>Leave the selected image <strong>Ubuntu Server 22.04 LTS x64 Gen2</strong>.</li>
<li>For the Size, choose the appropriate size for your application.  For this demo, <strong>Standard_B2s(2CPU,4 GB)</strong> size was used.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-Azure2-99b55e3435e77200f49b99d3bd7219e4.jpg" width="895" height="572" class="img_ev3q"></p><ul>
<li>
<p>Next, choose <strong>Authentication type</strong> to log in to the VM. <strong>Logging in with a password is insecure</strong>.</p>
</li>
<li>
<p>Enter a username (<strong>remember the username, you will need it to log in to the VM</strong>), or leave the default user <strong>azureuser</strong></p>
</li>
<li>
<p>Choose your SSH key</p>
</li>
<li>
<p>For <strong>inbound ports</strong>, select the ssh. You can add an extra port based on your OpenZiti setup.</p>
</li>
<li>
<p>You can leave everything default.
Press <strong>Review + create</strong>
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-Azure4-d3d40db8fac36e3162a53aff6992f256.jpg" width="862" height="538" class="img_ev3q"></p>
</li>
<li>
<p>After the Validation passed. Press <strong>Create</strong> to create VM.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-Azure5-7e2830b8120aa8110182f519cf60b7ad.jpg" width="851" height="569" class="img_ev3q"></p>
</li>
<li>
<p><strong>Important:</strong> If you are creating the network controller, you need to associate a DNS name to the public IP of your VM.</p>
</li>
<li>
<p>You can do this from &quot;Virtual machine&quot; page.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-Azure6-90b8e65c111dde36da53822fd1bf4a5c.jpg" width="1312" height="357" class="img_ev3q"></p>
</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>login to the <strong>AWS console</strong>.</li>
<li>go to the <strong>EC2 dashboard</strong>.</li>
<li>Click on the <strong>Instances</strong>.</li>
<li><strong>Launch the instances</strong></li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-AWS1-72424b3465fab46169728d0f7a1b7336.jpg" width="1299" height="201" class="img_ev3q"></p><ul>
<li>
<p>Fill the <strong>Name</strong> of your instance.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-AWS2-4634b5275400b43e0248c1c204e1a25b.jpg" width="1007" height="474" class="img_ev3q"></p>
</li>
<li>
<p>On the Quick start select <strong>Ubuntu</strong>.</p>
</li>
<li>
<p>Select the <strong>Ubuntu Server 22.04 LTS</strong>.</p>
</li>
<li>
<p>Leave the Architecture as <strong>64-bit (x86)</strong></p>
</li>
<li>
<p>Select the instance type <strong>t2.medium</strong></p>
</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-AWS3-944a11b7557aa4f3edebec812a8834fd.jpg" width="826" height="575" class="img_ev3q"></p><ul>
<li>In the <strong>Key pair (login.)</strong> section, choose the key name which you already created.</li>
<li>In the <strong>Network settings</strong> section, choose the VPC for your VM.</li>
<li>Select the subnet.</li>
<li>Select <strong>Enable</strong> for <strong>Auto assign public IP</strong></li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-AWS4-2ace42a082ae0d48cb634b115262c0a4.jpg" width="1063" height="582" class="img_ev3q"></p><ul>
<li>Click on ** Create security group** to allow traffic into your VM.</li>
<li>Name the security group.</li>
<li>Create the Firewall rule based on the ports you configured for the controller.</li>
<li>Allow the same TCP port you configured (e.g., 1280) for the controller along with SSH.</li>
</ul><p><strong>Security Group For the controller.</strong>
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Firewall-AWS-Controller-912ca5f945e32ecccdd2bbcbca5fb511.jpg" width="1090" height="981" class="img_ev3q"></p><p><strong>Security Group for the Router</strong>
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Firewall-AWS-ER-bfcbf0c5a898ea5c4564749a422dd2ee.jpg" width="1194" height="965" class="img_ev3q"></p><ul>
<li>Under <strong>Configure storage</strong> section, choose at least <strong>20</strong> GiB storage space.</li>
</ul><p>Now click on <strong>Launch instance</strong></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>
<p>Login to the GCP console.</p>
</li>
<li>
<p>Go to <strong>COMPUTE ENGINE</strong> dashboard.</p>
</li>
<li>
<p>Click on <strong>CREATE INSTANCE</strong>.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-GCP1-ba14e3330cfa18b53ec231b100afd4c8.jpg" width="1287" height="282" class="img_ev3q"></p>
</li>
<li>
<p>Configure the VM as follow:</p>
</li>
<li>
<p><strong>Name</strong> of the VM</p>
</li>
<li>
<p><strong>Region</strong> and <strong>Zone</strong></p>
</li>
<li>
<p>Choose <strong>e2-medium</strong> for <strong>Machine type</strong>
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-GCP4-e884d3870b1ec7b9ae01cf5d3df60aa3.jpg" width="680" height="585" class="img_ev3q"></p>
</li>
<li>
<p>Hit <strong>CHANGE</strong> at the &quot;Boot disk** section to change the OS image.</p>
</li>
<li>
<p>On the &quot;Boot disk&quot; page, Choose <strong>PUBLIC IMAGES</strong></p>
</li>
<li>
<p>Choose <strong>Ubuntu</strong> as the Operating system</p>
</li>
<li>
<p>Select <strong>Ubuntu 22.04 LTS, x86</strong> Version.</p>
</li>
<li>
<p>Hit <strong>SELECT</strong> to complete the selection.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-GCP5-eb08ecf042d8ee87d6f252438afeabd3.jpg" width="785" height="617" class="img_ev3q"></p>
</li>
<li>
<p>Open <strong>Advanced Options</strong>, and then open <strong>Networking</strong></p>
</li>
<li>
<p><strong>Highly recommended:</strong> assign a Network tags.  This will help you to configure the firewall later.</p>
</li>
<li>
<p><strong>For local GW VM</strong>, <strong>Enable</strong> IP forwarding at this time. You will not be able to change this setting from the console after the VM is created.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-GCP6-8be95201d51a2140d42648f0fad29602.jpg" width="558" height="302" class="img_ev3q"></p>
</li>
<li>
<p><strong>Optional</strong> you can reserve static external IP ADDRESS under <strong>Networking/Network interfaces</strong> section. Reserving static IP is useful for the Network controller in case you have to shut down the VM.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-GCP7-9cd9f7d510985d11c65208c52da39420.jpg" width="607" height="679" class="img_ev3q"></p>
</li>
<li>
<p>Now click on <strong>CREATE</strong> to create the virtual machine.</p>
</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Login to the Digital Ocean console and create a <strong>Droplets</strong> from the dropdown menu on the upper right-hand side.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create1-75ec2fe64ab2580eb51cc81404701d35.jpg" width="298" height="156" class="img_ev3q"></p><ul>
<li>
<p>On the &quot;Create Droplets&quot; screen, Choose &quot;<strong>Ubuntu</strong>&quot;, version &quot;<strong>22.04</strong>&quot;.</p>
</li>
<li>
<p>For the Size, choose the appropriate size for your application.  For this guide, a smaller size was used.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create2-4dafd219cfd0597cc3e264192d7f0d6d.jpg" width="1016" height="893" class="img_ev3q"></p>
</li>
<li>
<p>Next, choose an ssh-key to log in to the VM. (We highly discourage login to the VM using Password),</p>
</li>
<li>
<p>then <strong>Create Droplet</strong>
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create3-b1c2bc10205d13c45ed7ace53485287b.jpg" width="1090" height="964" class="img_ev3q"></p>
</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Login to the <strong>ORACLE Cloud</strong> console.</li>
<li>Go to Home &gt; Dashboard.</li>
<li>Click on <strong>Instances</strong> (Under <strong>Compute</strong> category).</li>
<li>Create an instance.</li>
<li>Name the instance.</li>
<li>Choose the compartment.</li>
<li>Select the Availability domain under Placement.</li>
<li>Leave the security disabled</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-OCI1-f408c6d8a76233b0da275db20e9728a9.jpg" width="1030" height="514" class="img_ev3q"></p><ul>
<li>Under the &quot;Image and shape selection&quot;, click <strong>Change image</strong> icon.</li>
<li>Select the <strong>Ubuntu</strong> icon.</li>
<li>Select the <strong>Canonical Ubuntu 22.04</strong>.</li>
<li>Select any image build. And press <strong>Select image</strong></li>
<li>Under the &quot;Shape&quot; selection, Choose <strong>Change shape</strong>.</li>
<li>Change to <strong>2</strong> OCUPs and <strong>4</strong> GB memory.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-OCI2-f2c989209acccf4d4e7b220eac8051f1.jpg" width="857" height="445" class="img_ev3q"></p><ul>
<li>On the networking section.</li>
<li>Select your <strong>Primary network</strong> and <strong>Subnet</strong>.</li>
<li>For <strong>Public IPv4 address</strong>, check <strong>Assign a public IPv4 address</strong>.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-OCI3-2443d1be11050e44699b365015ac2c1d.jpg" width="828" height="461" class="img_ev3q"></p><ul>
<li>In the <strong>Add SSH keys</strong> section, choose how you want your ssh keys generated. <strong>Logging in with a password is insecure</strong>.</li>
<li>Leave default boot volume.</li>
<li>Now click on <strong>Create</strong>.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-OCI4-df9de88c0ff0367e808d88d631e03d46.jpg" width="968" height="464" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Login to the IBM cloud.</li>
<li>Go to dashboard.</li>
<li>Click on <strong>Create resource  +</strong> on the top right</li>
<li>Filter on &quot;Compute&quot; on the Category (on the left)</li>
<li>Choose <strong>Virtual Server for Classic</strong>.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-IBM1-e72ce331716b2e91e158b7bbfe02019d.jpg" width="1336" height="545" class="img_ev3q"></p><ul>
<li>Leave the &quot;Type of virtual server&quot; as <strong>Public</strong>.</li>
<li>Give it your <strong>Hostname</strong>.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-IBM2-8262c7990b6e83de5cc66c67bb5d4ea5.jpg" width="933" height="596" class="img_ev3q"></p><ul>
<li>Select the location.</li>
<li>Select the profile, the size of <strong>B1.2x4</strong> is adequate for our exercise.</li>
<li>Choose the SSH key.</li>
<li>On the &quot;Operating system&quot; select the <strong>Ubuntu</strong>. Select the version <strong>22.04</strong></li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-IBM3-3e792f08850baf1a3cbcbf09c138ff74.jpg" width="980" height="562" class="img_ev3q"></p><ul>
<li>Leave everything else default except <strong>Add-ons</strong>, turn the <strong>Firewall</strong> features on.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Create-IBM4-00f7028ebbe61f5de9183d4d6a5805ee.jpg" width="1018" height="662" class="img_ev3q"></p><ul>
<li>Alternatively, you can select <strong>allow_all</strong> under the &quot;Public security group&quot;, and leave the Add-on Firewall feature off.  <strong>This is not recommended as it opens your VM for attacks</strong>.</li>
<li>Press <strong>Create</strong> on the right side menu to create the VM.</li>
</ul></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-firewall">1.2 Firewall<a href="#12-firewall" class="hash-link" aria-label="Direct link to 1.2 Firewall" title="Direct link to 1.2 Firewall">â</a></h2>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Azure</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Google</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Digital Ocean</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Oracle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">IBM</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><ul>
<li>Azure&#x27;s firewall is blocking all incoming access to the VM. You will need to open the ports you configured for Ziti services. Here is an example of the firewall ports.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Controller-Firewall-Azure-11e435600f203cabfebaac0365d830b3.jpg" width="1309" height="463" class="img_ev3q"></li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>You must open the same ports in the AWS Security Group that you configured Ziti to listen for.</li>
<li>Here is an example.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Firewall-AWS-Controller-912ca5f945e32ecccdd2bbcbca5fb511.jpg" width="1090" height="981" class="img_ev3q"></li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>
<p>GCPâs default firewall is blocking all incoming access to the VM. You will need to open the same ports you specified for the controller and ZAC (if you plan to use ZAC). Here is an example of the firewall ports if you used the default ports.</p>
</li>
<li>
<p>Go to your VM screen, click on the <strong>Network interfaces</strong> name (i.e. nic0)</p>
</li>
<li>
<p>Click on <strong>Firewall</strong> menu on the left side to bring up the firewall screen</p>
</li>
<li>
<p>On the firewall screen, click on <strong>+ CREATE FIREWALL RULE</strong> to create new rules</p>
</li>
<li>
<p>Give a meaningful <strong>name</strong> to your firewall rule</p>
</li>
<li>
<p>Choose your <strong>Network</strong></p>
</li>
<li>
<p>Use traffic direction <strong>Ingress</strong></p>
</li>
<li>
<p>Action <strong>Allow</strong></p>
</li>
<li>
<p>Targets, you can use &quot;All instances in the network&quot; (if you did not specify &quot;Network tags&quot; for your VM). In this example, we are using <strong>Specified target tags</strong> option.</p>
</li>
<li>
<p>Enter <strong>Target tags</strong> for your VM. In this example, our tag is <strong>nc</strong></p>
</li>
<li>
<p>Enter Source IPv4 ranges: <strong>0.0.0.0/0</strong></p>
</li>
<li>
<p>For the controller, you must allow the same <strong>TCP</strong> ports you configured Ziti to listen for along with the SSH port (<strong>22</strong>).
Hit <strong>CREAETE</strong> to create rules.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Controller-Firewall-GCP-6f7549eda96b57b157e4a289eed2300c.jpg" width="564" height="971" class="img_ev3q"></p>
</li>
<li>
<p>The firewall rule also shows up on your &quot;Network interface details&quot; screen.</p>
</li>
<li>
<p>From your VM screen, click on the <strong>Network interfaces</strong> name (i.e. nic0)
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Controller-Firewall-GCP2-d569f831902b4282b0c047adc978e7f9.jpg" width="1194" height="599" class="img_ev3q"></p>
</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>DigitalOcean by default does not set up the firewall for the VM.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><hr><p>Oracle cloud by default blocks all incoming traffic to the VM. You will need to open the ports you specified for the controller and ZAC (if you plan to use ZAC).</p><ul>
<li>First, we need to <strong>Create a security group</strong></li>
<li>From the <strong>Networking</strong> category, select the <strong>Virtual cloud networks</strong>.</li>
<li>Select the VCN your VM is in.</li>
<li>On the left side menu, select the <strong>Network Security Group</strong>.</li>
<li>Select <strong>Create Network Security Group</strong>.</li>
<li>Name the security group and select the next.</li>
<li>Now create rules for ingress traffic.</li>
<li>Port 22/TCP for SSH</li>
<li>OpenZiti ports, e.g., 1280/tcp</li>
<li>Also create a rule to allow all traffic outbound (<strong>Egress</strong>).</li>
</ul><p>Following is the example of the Security Group for the controller</p><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Firewall-OCI1-8a3da23e3a59af75883f26575f69410a.jpg" width="1312" height="577" class="img_ev3q"></p><ul>
<li>After the security group is created, attach it to the instance.</li>
<li>From the &quot;Instance details&quot; screen, select <strong>Edit</strong> under the <strong>Network security groups</strong> section.</li>
<li>Select the security group from the dropdown and press <strong>Save changes</strong>.</li>
</ul><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Firewall-OCI2-329667c52918ab4e842823746dcd1c13.jpg" width="1006" height="564" class="img_ev3q"></p><hr><p><strong>NOTE 1</strong></p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Oracle Cloud also uses Security Lists (on the subnet) to marshal the traffic, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">please make sure the setting under Security Lists is not conflicting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with your security group rules.</span><br></span></code></pre></div></div><hr><p><strong>NOTE 2</strong></p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">It is possible that after the security group configuration, the ufw does not</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">work correctly on the VM.</span><br></span></code></pre></div></div><p>You should <strong>Turn on ufw</strong> and <strong>restart the VM</strong> after the security group configuration.</p><ul>
<li>ufw must be turned on for traffic to get to the VM.</li>
<li>after ufw is enabled, setup <strong>allow</strong> traffic for OpenZiti ports:</li>
</ul><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw enable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 1280/tcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo shutdown -r 0</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>If you turn on the firewall feature, you will need to config firewall rules.</p><ul>
<li>Open the Instance detail screen</li>
<li>Find the <strong>Firewall details</strong> at the bottom right. Open it.</li>
</ul><p>Add the following rules.</p><ul>
<li>ssh: port 22/TCP</li>
<li>OpenZiti ports, e.g., 1280/tcp</li>
<li>Deny rules to deny all other traffic</li>
</ul><p>Make sure the firewall is active, it should display <strong>Processing all rules</strong> if it is active.</p><p><img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/Firewall-IBM-controller-2938edc23ed32cdc2dc9448218e1129a.jpg" width="1605" height="401" class="img_ev3q"></p></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="13-login-and-setup-controller">1.3 Login and Setup Controller<a href="#13-login-and-setup-controller" class="hash-link" aria-label="Direct link to 1.3 Login and Setup Controller" title="Direct link to 1.3 Login and Setup Controller">â</a></h2>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Azure</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Google</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Digital Ocean</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Oracle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">IBM</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><ul>
<li>Once the VM is created, we can get the IP address (and the DNS name) of the VM from the Virtual machine screen.</li>
<li>Login to the VM by using defined user &quot;username&quot; (default username is azureuser) and the private sshkey:</li>
</ul><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i &lt;private_key&gt; &lt;username&gt;@&lt;ip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i &lt;private_key&gt; &lt;username&gt;@&lt;dns-name&gt;</span><br></span></code></pre></div></div><p>Use a fully qualified domain name (FQDN) to <a href="/docs/guides/deployments/linux/controller/deploy">deploy the controller</a>.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Once the VM is created, we can get the IP address (and the DNS name) of the VM from the Instance detail screen.</li>
<li><strong>NOTE:</strong> DNS name is only available if you enabled <strong>DNS Hostnames</strong> under VPC.</li>
<li>Login to the VM with username &quot;ubuntu&quot;:</li>
</ul><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i &lt;private_key&gt; ubuntu@&lt;ip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i &lt;private_key&gt; ubuntu@&lt;dns-name&gt;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Once the VM is created, we can log in through <strong>SSH</strong> button on the VM instances screen.
<img decoding="async" loading="lazy" alt="Diagram" src="/assets/images/GCP-login1-4a85ef6f0b3a16ea562e33e71692d37f.jpg" width="951" height="227" class="img_ev3q"></li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Once the VM is created, we can get the IP address of the droplet from the Resources screen.</li>
<li>Login to the VM with username &quot;root&quot; and IP address:</li>
</ul><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh root@&lt;ip&gt;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Once the VM is created, we can get the IP address of the VM from the instance details screen.</li>
<li>Login to the VM with username &quot;ubuntu&quot; and the IP address:</li>
</ul><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i &lt;private_key&gt; ubuntu@&lt;ip&gt;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Once the VM is created, we can get the IP address of the VM from the Devices screen.</li>
<li>Login to the VM with username &quot;ubuntu&quot; and the IP address:</li>
</ul><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i &lt;private_key&gt; ubuntu@&lt;ip&gt;</span><br></span></code></pre></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/guides/deployments/40-cloud/10-controller.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-06-16T17:15:10.000Z" itemprop="dateModified">Jun 16, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/cloud"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cloud</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/guides/deployments/cloud/router"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Router</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#11-create-a-vm-to-be-used-as-the-controller" class="table-of-contents__link toc-highlight">1.1 Create a VM to be used as the Controller</a></li><li><a href="#12-firewall" class="table-of-contents__link toc-highlight">1.2 Firewall</a></li><li><a href="#13-login-and-setup-controller" class="table-of-contents__link toc-highlight">1.3 Login and Setup Controller</a></li></ul></div></div></div></div></main></div></div></div><footer class="layoutFooter_Rs4I ozFooter_Avh_"><section class="footer_TVlg ozHorizontalSectionRoot_MIa6 ozhsContent_Tzp1"><div class="footerContainer_otJT"><div class="footerGrid_DfDa"><div class="footerColumn_aKLl"><h3>OpenZiti</h3><p>An open source project enabling developers to embed zero trust networking directly into applications.</p><div class="footerSocialLinks_HWin"><a href="https://github.com/openziti/ziti" target="_blank" class="footerSocialLink_t5Hs"><svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"></path></svg></a><a href="https://www.linkedin.com/company/netfoundry" target="_blank" class="footerSocialLink_t5Hs"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M15.996 16V10.1C15.996 7.5 15.375 5.49999 12.025 5.49999C10.4 5.49999 9.325 6.39999 8.875 7.29999H8.825V5.79999H5.65V16H8.95V10.7C8.95 9.30001 9.2 7.9 10.925 7.9C12.65 7.9 12.675 9.59999 12.675 10.8V16H15.996Z"></path><path d="M0.25 5.79999H3.575V16H0.25V5.79999Z"></path><path d="M1.9 0C0.85 0 0 0.85 0 1.9C0 2.95 0.85 3.8 1.9 3.8C2.95 3.8 3.8 2.95 3.8 1.9C3.8 0.85 2.95 0 1.9 0Z"></path></svg></a><a href="https://www.youtube.com/OpenZiti" target="_blank" class="footerSocialLink_t5Hs"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M15.969 4.69c-.183-1.358-1.062-2.275-2.361-2.46C12.371 2 8 2 8 2S3.629 2 2.362 2.229c-1.3.186-2.179 1.103-2.361 2.461C0 6.03 0 10 0 10s0 3.97.2 5.31c.183 1.358 1.062 2.275 2.361 2.46C3.63 18 8 18 8 18s4.371 0 5.638-.23c1.3-.185 2.178-1.102 2.361-2.46.2-1.34.2-5.31.2-5.31s0-3.97-.23-5.31zm-8.36, 8.57V6.73l3.76 2.27-3.76 2.26z"></path></svg></a><a href="https://x.com/OpenZiti" target="_blank" class="footerSocialLink_t5Hs"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M15.996 3.038c-.59.262-1.219.44-1.885.52.677-.406 1.194-1.05 1.438-1.815-.634.375-1.337.648-2.085.795-.598-.638-1.45-1.038-2.396-1.038-1.813 0-3.283 1.469-3.283 3.282 0 .257.03.507.085.748-2.728-.137-5.147-1.445-6.766-3.43-.282.485-.444 1.05-.444 1.651 0 1.14.58 2.143 1.46 2.732-.538-.017-1.044-.164-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.219-.276.075-.567.116-.866.116-.211 0-.416-.021-.617-.06.418 1.304 1.63 2.254 3.066 2.28-1.124.883-2.539 1.406-4.077 1.406-.265 0-.526-.015-.785-.046 1.453.933 3.178 1.475 5.032 1.475 6.038 0 9.34-5.002 9.34-9.34 0-.142-.004-.284-.01-.425.641-.463 1.198-1.039 1.638-1.696"></path></svg></a></div></div><div class="footerColumn_aKLl"><h3>Documentation</h3><ul class="footerLinks_fOY0"><li><a href="/docs/learn/quickstarts/services/ztha">Getting Started</a></li><li><a href="/docs/reference/developer/api/">API Reference</a></li><li><a href="/docs/reference/developer/sdk/">SDK Integration</a></li></ul></div><div class="footerColumn_aKLl"><h3>Community</h3><ul class="footerLinks_fOY0"><li><a href="https://github.com/openziti/ziti">GitHub</a></li><li><a href="https://openziti.discourse.group/">Discourse Forum</a></li><li><a href="/policies/CONTRIBUTING">Contributing</a></li></ul></div><div class="footerColumn_aKLl"><h3>Resources</h3><ul class="footerLinks_fOY0"><li><a href="https://blog.openziti.io">Blog</a></li><li><a href="https://netfoundry.io/">NetFoundry</a></li></ul></div></div></div><div class="footerCopyright_W7lP"><p>Â© 2025 NetFoundry Inc. OpenZiti is an open source project sponsored by NetFoundry. All rights reserved.</p></div></section></footer></div></div>
</body>
</html>