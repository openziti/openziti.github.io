"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[21089],{14094:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>s,metadata:()=>n,toc:()=>h});var n=i(32867),a=i(74848),o=i(28453);const s={title:"Why We Verify GitHub Commits",date:new Date("2024-05-24T16:00:14.000Z"),cuid:"clwkvbmet00000ak6d5z5btad",slug:"why-we-verify-github-commits",authors:["KennethBingham"],image:"@site/blogs/openziti/v1716320888402/f7bcebeb-a9e6-4094-8e6c-fac73ce8a9c5.png",imageDark:"@site/blogs/openziti/v1716320888402/f7bcebeb-a9e6-4094-8e6c-fac73ce8a9c5.png",tags:["github","git","sdlc","gpg"]},r=void 0,c={authorsImageUrls:[void 0]},h=[{value:"Attribution with Git",id:"attribution-with-git",level:2},{value:"How can I protect the sauce?",id:"how-can-i-protect-the-sauce",level:2},{value:"Require Verified Commits",id:"require-verified-commits",level:3},{value:"Enable Vigilant Mode",id:"enable-vigilant-mode",level:3},{value:"What Doesn&#39;t this Prevent?",id:"what-doesnt-this-prevent",level:2},{value:"Hasty Review",id:"hasty-review",level:3},{value:"A Compromised GitHub Account",id:"a-compromised-github-account",level:3},{value:"The Long Game",id:"the-long-game",level:3}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Assigning the author on a commit is an essential feature of Git that allows you to send a commit on behalf of someone\nwhile preserving their authorship. I speculate this was the norm when the Linux Kernel authors, who also\ncreated Git, still received many contributions via email."}),"\n",(0,a.jsx)(t.p,{children:"GitHub automatically links the commit to the attributed author's and committer's GitHub profile(s). By default, there's no visible indication that a commit was attributed."}),"\n",(0,a.jsx)(t.h2,{id:"attribution-with-git",children:"Attribution with Git"}),"\n",(0,a.jsxs)(t.p,{children:["First, we can see that ",(0,a.jsx)(t.a,{href:"mailto:bob@example.com",children:"bob@example.com"})," is the currently-configured author email."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"$ git config --local user.name\nBob\n\n$ git config --local user.email\nbob@example.com\n"})}),"\n",(0,a.jsx)(t.p,{children:"Next, Bob configures Git to impersonate a known email address."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"git config --local user.name bot\ngit config --local user.email github-actions[bot]@users.noreply.github.com\n"})}),"\n",(0,a.jsx)(t.p,{children:"Next, Bob makes the commit locally and inspects the metadata."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'git commit -am "who sent this commit?"\ngit log -1 --format=fuller\n'})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-text",children:"commit 114550a026fb4a106ad3911b2c585eda16d8dbfe (HEAD -> main, origin/main, origin/HEAD)\nAuthor:     github-actions[bot] <github-actions[bot]@users.noreply.github.com>\nAuthorDate: Tue May 21 09:52:06 2024 -0400\nCommit:     github-actions[bot] <github-actions[bot]@users.noreply.github.com>\nCommitDate: Tue May 21 09:52:06 2024 -0400\n\n    who sent this commit?\n"})}),"\n",(0,a.jsx)(t.p,{children:"In the above example, Bob specifies the committer and author metadata of the next commit to match a known email address before pushing it to GitHub, which displays the commit as if that bot had sent it."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:i(53698).A+"",width:"471",height:"212"})}),"\n",(0,a.jsxs)(t.p,{children:["Bob can also update the author and committer metadata on the last commit (",(0,a.jsx)(t.code,{children:"HEAD"}),", or any commit during a rebase) and push it to GitHub."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'GIT_COMMITTER_NAME="github-actions[bot]"\nGIT_COMMITTER_EMAIL="${GIT_COMMITTER_NAME}@users.noreply.github.com"\nexport GIT_COMMITTER_NAME GIT_COMMITTER_EMAIL\n\ngit commit \\\n--amend \\\n--no-edit \\\n--no-gpg-sign \\\n--author "${GIT_COMMITTER_NAME} <${GIT_COMMITTER_EMAIL}>"\n'})}),"\n",(0,a.jsx)(t.h2,{id:"how-can-i-protect-the-sauce",children:"How can I protect the sauce?"}),"\n",(0,a.jsx)(t.p,{children:"While you can't disable attribution in GitHub, there are some things you can do."}),"\n",(0,a.jsx)(t.h3,{id:"require-verified-commits",children:"Require Verified Commits"}),"\n",(0,a.jsxs)(t.p,{children:["A verified commit is authenticated by GitHub. GitHub ",(0,a.jsx)(t.a,{href:"https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification",children:"lets you require verified commits"}),". Once enabled, GitHub will not accept unverified commits in the specified branches."]}),"\n",(0,a.jsx)(t.p,{children:'Commits can be marked "verified" in several ways:'}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["The easiest way is to edit files in the GitHub UI. This allows GitHub to authenticate the commit with the browser session and sign the commit with ",(0,a.jsx)(t.a,{href:"https://github.com/web-flow.gpg",children:"their web flow key"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["The most useful way is to sign commits locally with the ",(0,a.jsx)(t.code,{children:"git"})," CLI and a GPG key. This allows GitHub and anyone to verify the signature on the commit."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"git verify-commit -v HEAD\n"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-text",children:'tree 550accc6ea105ed9e407db481c99d45d3cb32cb1\nparent 408720459f8985dd01d4e36857d8e42f988539f9\nauthor Kenneth Bingham <kenneth.bingham@netfoundry.io> 1716477976 -0400\ncommitter Kenneth Bingham <kenneth.bingham@netfoundry.io> 1716477976 -0400\n\ndocument rolling back downstream\ngpg: Signature made Thu 23 May 2024 11:26:17 AM EDT\ngpg:                using RSA key 1EB5E833014594E4EDB0317331709281860130B6\ngpg:                issuer "kenneth.bingham@netfoundry.io"\ngpg: Good signature from "Kenneth Bingham <kenneth.bingham@netfoundry.io>"         \n[ultimate]\nPrimary key fingerprint: F52F 87DD 444E 337F FA40  951A F3FC 641E F53D D900\n     Subkey fingerprint: 1EB5 E833 0145 94E4 EDB0  3173 3170 9281 8601 30B6\n'})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"enable-vigilant-mode",children:"Enable Vigilant Mode"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"https://docs.github.com/en/authentication/managing-commit-signature-verification/displaying-verification-statuses-for-all-of-your-commits",children:"Vigilant mode"})," changes the way your commits are presented on GitHub.com."]}),"\n",(0,a.jsx)(t.p,{children:"Without vigilant mode, unverified commits do not have any verification status badge, so there's no visual difference between those sent by the committer and those attributed to another author."}),"\n",(0,a.jsx)(t.p,{children:'With vigilant mode, all of your commits have a badge ("verified," "unverified," or "partially verified"). This raises awareness about the significance of verified commits and serves as a visual warning that a commit was not authenticated by GitHub.'}),"\n",(0,a.jsx)(t.h2,{id:"what-doesnt-this-prevent",children:"What Doesn't this Prevent?"}),"\n",(0,a.jsx)(t.h3,{id:"hasty-review",children:"Hasty Review"}),"\n",(0,a.jsx)(t.p,{children:"Requiring verified commits is not a substitute for a careful review of contributions. A malicious or otherwise unwanted commit can indeed be verified."}),"\n",(0,a.jsx)(t.h3,{id:"a-compromised-github-account",children:"A Compromised GitHub Account"}),"\n",(0,a.jsx)(t.p,{children:"Intruders can impersonate you and send verified malicious commits if your GitHub account is compromised."}),"\n",(0,a.jsx)(t.h3,{id:"the-long-game",children:"The Long Game"}),"\n",(0,a.jsx)(t.p,{children:"A patient actor can build credibility for their GitHub account and infiltrate a project. This may yield an opportunity to introduce verified malicious commits."}),"\n",(0,a.jsxs)(t.p,{children:["Reference: ",(0,a.jsx)(t.a,{href:"https://boehs.org/node/everything-i-know-about-the-xz-backdoor",children:"The xz backdoor timeline"})]})]})}function m(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},53698:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/f969b51e-be03-4a7a-923e-f3250601dc69-0424443e90b98cf33dca32a7deec3e60.png"},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>r});var n=i(96540);const a={},o=n.createContext(a);function s(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(o.Provider,{value:t},e.children)}},32867:e=>{e.exports=JSON.parse('{"permalink":"/docs/openziti/blog/why-we-verify-github-commits","source":"@site/blog/why-we-verify-github-commits.md","title":"Why We Verify GitHub Commits","description":"Assigning the author on a commit is an essential feature of Git that allows you to send a commit on behalf of someone","date":"2024-05-24T16:00:14.000Z","tags":[{"inline":false,"label":"GitHub","permalink":"/docs/openziti/blog/tags/github","description":"GitHub content"},{"inline":false,"label":"Git","permalink":"/docs/openziti/blog/tags/git","description":"Git content"},{"inline":false,"label":"SDLC","permalink":"/docs/openziti/blog/tags/sdlc","description":"Software Development Lifecycle"},{"inline":false,"label":"GPG","permalink":"/docs/openziti/blog/tags/gpg","description":"GNU Privacy Guard content"}],"readingTime":3.47,"hasTruncateMarker":true,"authors":[{"name":"Kenneth Bingham","title":"Author","url":"https://github.com/qrkourier","imageURL":"https://avatars.githubusercontent.com/qrkourier","key":"KennethBingham","page":null}],"frontMatter":{"title":"Why We Verify GitHub Commits","date":"2024-05-24T16:00:14.000Z","cuid":"clwkvbmet00000ak6d5z5btad","slug":"why-we-verify-github-commits","authors":["KennethBingham"],"image":"@site/blogs/openziti/v1716320888402/f7bcebeb-a9e6-4094-8e6c-fac73ce8a9c5.png","imageDark":"@site/blogs/openziti/v1716320888402/f7bcebeb-a9e6-4094-8e6c-fac73ce8a9c5.png","tags":["github","git","sdlc","gpg"]},"unlisted":false,"prevItem":{"title":"Extend Access to a Private S3 Bucket Using Python","permalink":"/docs/openziti/blog/extend-access-to-a-private-s3-bucket-using-python"},"nextItem":{"title":"Limitless zrok with Docker","permalink":"/docs/openziti/blog/limitless-zrok-with-docker"}}')}}]);