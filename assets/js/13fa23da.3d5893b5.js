"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[89744],{27136:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"learn/core-concepts/security/authentication/api-session-certificates","title":"API Session Certificates","description":"API Session Certificates are ephemeral short-lived x509 certificates that can be created through a CSR process after","source":"@site/docs/learn/core-concepts/security/authentication/20-api-session-certificates.md","sourceDirName":"learn/core-concepts/security/authentication","slug":"/learn/core-concepts/security/authentication/api-session-certificates","permalink":"/docs/openziti/learn/core-concepts/security/authentication/api-session-certificates","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":20,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"3rd Party CAs","permalink":"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas"},"next":{"title":"Authentication Policies","permalink":"/docs/openziti/learn/core-concepts/security/authentication/authentication-policies"}}');var n=s(74848),c=s(28453);const a={},r="API Session Certificates",o={},l=[{value:"Lifecycle &amp; Scope",id:"lifecycle--scope",level:2},{value:"Use",id:"use",level:2},{value:"Creation",id:"creation",level:2},{value:"Request Payload",id:"request-payload",level:3},{value:"Response Payload",id:"response-payload",level:3},{value:"List &amp; Detail",id:"list--detail",level:2},{value:"Delete",id:"delete",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"api-session-certificates",children:"API Session Certificates"})}),"\n",(0,n.jsxs)(i.p,{children:["API Session Certificates are ephemeral short-lived x509 certificates that can be created through a CSR process after\nan API Session is ",(0,n.jsx)(i.a,{href:"/docs/openziti/learn/core-concepts/security/sessions#full-vs-partial-authentication",children:"fully authenticated"}),"."]}),"\n",(0,n.jsx)(i.h2,{id:"lifecycle--scope",children:"Lifecycle & Scope"}),"\n",(0,n.jsxs)(i.p,{children:['The certificates are scoped by the "valid before" and "valid after" dates in addition to the API Session. If an ',(0,n.jsx)(i.a,{href:"/docs/openziti/learn/core-concepts/security/sessions#api-session",children:"API Session"})," is\nremoved (expiration, logout, etc.) the API Session Certificates created by that API Session are no longer valid."]}),"\n",(0,n.jsxs)(i.p,{children:["API Session Certificates may only be used by the ",(0,n.jsx)(i.a,{href:"/docs/openziti/learn/core-concepts/security/sessions#api-session",children:"API Session"})," that created them. Attempting to use an ",(0,n.jsx)(i.a,{href:"/docs/openziti/learn/core-concepts/security/sessions#api-session",children:"API Session"}),"\nCertificate to connect to and edge router without the matching ",(0,n.jsx)(i.a,{href:"/docs/openziti/learn/core-concepts/security/sessions#api-session",children:"API Session"})," security token will be rejected."]}),"\n",(0,n.jsx)(i.h2,{id:"use",children:"Use"}),"\n",(0,n.jsx)(i.p,{children:"API Session Certificates are useful for identities that do not use x509 certificates as a primary authentication mechanism.\nAPI Sessions that use x509 certificates during primary authentication can use that  certificate for connections to\nEdge Routers. For non-x509 primary authentication mechanisms (JWT, UPDB, etc.) API Session Certificates must be used\nas no certificates will be available for use to connect to Edge Routers."}),"\n",(0,n.jsx)(i.h2,{id:"creation",children:"Creation"}),"\n",(0,n.jsxs)(i.p,{children:["API Session Certificates can be created by ",(0,n.jsx)(i.code,{children:"POST /edge/client/v1/current-api-session/certificates"}),". The payload\nneeds to be a valid PEM-encoded CSR in the ",(0,n.jsx)(i.code,{children:"csr"})," field. The CSR should contain at minimum subject information.\nSensitive fields such as key usage will be ignored. Additional Ziti-specific SANs\nmay be added."]}),"\n",(0,n.jsx)(i.h3,{id:"request-payload",children:"Request Payload"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-text",children:'{\n  "csr": "-----BEGIN CERTIFICATE REQUEST-----\\nMIICij...\\n-----END CERTIFICATE REQUEST-----"\n}\n'})}),"\n",(0,n.jsx)(i.h3,{id:"response-payload",children:"Response Payload"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-text",children:'{\n    "data": {\n        "_links": {\n            "self": {\n                "href": "./current-api-session/certificates/URjzX9U1U"\n            }\n        },\n        "id": "URjzX9U1U",\n        "cas": "\\n-----BEGIN CERTIFICATE-----\\nMII...\\n-----END CERTIFICATE-----\\n",\n        "certificate": "-----BEGIN CERTIFICATE-----\\nMII...\\n-----END CERTIFICATE-----\\n"\n    },\n    "meta": {}\n}\n'})}),"\n",(0,n.jsx)(i.h2,{id:"list--detail",children:"List & Detail"}),"\n",(0,n.jsxs)(i.p,{children:["API Session Certificates for the current ",(0,n.jsx)(i.a,{href:"/docs/openziti/learn/core-concepts/security/sessions#api-session",children:"API Session"})," may be:"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["listed: ",(0,n.jsx)(i.code,{children:"GET /edge/client/v1/current-api-session/certificates"})]}),"\n",(0,n.jsxs)(i.li,{children:["detailed: ",(0,n.jsx)(i.code,{children:"GET /edge/client/v1/current-api-session/certificates/<id>"})]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"delete",children:"Delete"}),"\n",(0,n.jsxs)(i.p,{children:["API Session Certificates may be removed via ",(0,n.jsx)(i.code,{children:"DELETE /edge/client/v1/current-api-session/certificates/<id>"})]})]})}function h(e={}){const{wrapper:i}={...(0,c.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,i,s)=>{s.d(i,{R:()=>a,x:()=>r});var t=s(96540);const n={},c=t.createContext(n);function a(e){const i=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),t.createElement(c.Provider,{value:i},e.children)}}}]);