"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[96041],{52779:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>d});var t=n(5852),r=n(74848),o=n(28453);const s={slug:"mobile-point-of-sale-mpos-app-ziti-android-java-sdk-integration",title:"Mobile Point of Sale (mPOS) app \u2013 embed zero trust networking",authors:["CurtTudor"],date:new Date("2020-03-19T00:00:00.000Z"),tags:["mobile","zero-trust","android","java","sdk"]},a=void 0,l={authorsImageUrls:[void 0]},d=[{value:"Mobile Point of Sale (mPOS) app \u2013 embed zero trust networking",id:"mobile-point-of-sale-mpos-app--embed-zero-trust-networking",level:2},{value:"Configuring Ziti zero trust networking for mPOS",id:"configuring-ziti-zero-trust-networking-for-mpos",level:3},{value:"Configure a zero trust service in minutes",id:"configure-a-zero-trust-service-in-minutes",level:4},{value:"Create Identity",id:"create-identity",level:3},{value:"Configure AppWANs",id:"configure-appwans",level:3},{value:"Integrate SDK in Android App",id:"integrate-sdk-in-android-app",level:3},{value:"Add Ziti Dependency",id:"add-ziti-dependency",level:3},{value:"Initialize Ziti",id:"initialize-ziti",level:3},{value:"Enroll Identity",id:"enroll-identity",level:3}];function c(e){const i={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"mobile-point-of-sale-mpos-app--embed-zero-trust-networking",children:"Mobile Point of Sale (mPOS) app \u2013 embed zero trust networking"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.em,{children:"Written with Sagarkumar S of Enlume Technologies"})}),"\n",(0,r.jsxs)(i.p,{children:["Point of sale application developers and solution providers need to provide secure, reliable applications to retailers.\xa0 However, retailers need to create duplicate networks with extra hardware and configuration to separate their point of sale (POS) data for PCI compliance.\xa0 ",(0,r.jsx)(i.strong,{children:"Now, there is a better way.\xa0 Use the simple Ziti SDKs to embed zero trust networking, inside the POS app, so that the POS app is secure on any network - micro-segmented and zero trust."})]}),"\n",(0,r.jsx)(i.p,{children:"This blog summarizes use of the Ziti SDK in a mobile point of sale application (mPOS) that is based on Java and built specifically for Android tablets and phones.\xa0 Ziti SDKs can also be used for Apple iOS, Mac, Windows and Linux environments."}),"\n",(0,r.jsx)(i.p,{children:"This is a relatively simple mPOS application with the front-end mobile application written in Java.\xa0 The backend application features a mongo DB cluster that is used as a repository of merchant transactions. The application server side can also use the Ziti zero trust, cloud native networking for simple, secure integrations with banking providers (not in scope for this post)."}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{src:n(13056).A+"",width:"974",height:"545"})}),"\n",(0,r.jsx)(i.p,{children:"The basic use of the mPOS solution:"}),"\n",(0,r.jsx)(i.p,{children:"1. Merchant initiates a sale transaction (pull mode) with customer phone number to send an OTP."}),"\n",(0,r.jsx)(i.p,{children:"2.Customer receives the OTP number and enters in mPOS app to complete the transaction."}),"\n",(0,r.jsx)(i.p,{children:"3.The transaction summary is updated in the mPOS app"}),"\n",(0,r.jsx)(i.p,{children:"4.Dashboard on application server records the transaction into mongo DB"}),"\n",(0,r.jsx)(i.p,{children:"Technologies used:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Mobile Apps Front end (mPOS for Merchant)"}),"\n",(0,r.jsx)(i.li,{children:"Java SDKs and Android app"}),"\n",(0,r.jsx)(i.li,{children:"Server side for Mobile"}),"\n",(0,r.jsx)(i.li,{children:"Node JS"}),"\n",(0,r.jsx)(i.li,{children:"MongoDB"}),"\n",(0,r.jsx)(i.li,{children:"Dashboard on Transactions"}),"\n",(0,r.jsx)(i.li,{children:"Angular 6"}),"\n",(0,r.jsx)(i.li,{children:"Ziti SDK"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.em,{children:"Prerequisite"})," : Read the ",(0,r.jsx)(i.a,{href:"https://netfoundry.github.io/ziti-doc/ziti/quickstarts/quickstart-overview.html",children:"Quickstart guide"})," and have access to the Ziti virtual gateway deployed in your cloud environment (pre-built versions in GCP, AWS and Azure marketplaces, with images available for other platforms)."]}),"\n",(0,r.jsx)(i.h3,{id:"configuring-ziti-zero-trust-networking-for-mpos",children:"Configuring Ziti zero trust networking for mPOS"}),"\n",(0,r.jsx)(i.h4,{id:"configure-a-zero-trust-service-in-minutes",children:"Configure a zero trust service in minutes"}),"\n",(0,r.jsx)(i.p,{children:"In simple terms, this is how you tell Ziti where your backend server is located"}),"\n",(0,r.jsxs)(i.p,{children:["Name - ",(0,r.jsx)(i.em,{children:"Name of your Service"})]}),"\n",(0,r.jsxs)(i.p,{children:["Ziti Router - ",(0,r.jsx)(i.em,{children:"the last Ziti Router traffic will be sent to select default"})]}),"\n",(0,r.jsxs)(i.p,{children:["Intercepting Host and Port - what DNS name or IP you wish to use Ziti to optimize Eg : ",(0,r.jsx)(i.strong,{children:"backend-server"})]}),"\n",(0,r.jsx)(i.p,{children:"Endpoint Service -\xa0"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Protocol : If you are consuming rest API, select TCP"}),"\n",(0,r.jsx)(i.li,{children:"Host : Provide your backend server IP address\xa0"}),"\n",(0,r.jsx)(i.li,{children:"Port : Provide the port on which your server is running"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Cluster - select the default"}),"\n",(0,r.jsx)(i.p,{children:"Identity - Leave as it is"}),"\n",(0,r.jsx)(i.p,{children:"Sample reference configuration:"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{src:n(65224).A+"",width:"775",height:"793"})}),"\n",(0,r.jsx)(i.h3,{id:"create-identity",children:"Create Identity"}),"\n",(0,r.jsx)(i.p,{children:"This is for secure authentication between your Ziti network and your mPOS or other application.\xa0"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Create a new identity from Ziti admin console (web)","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Name - Name of identity Eg ;\xa0 Device1"}),"\n",(0,r.jsx)(i.li,{children:"Identity Type - Device"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"Leave the rest of the fields as it is"}),"\n",(0,r.jsx)(i.li,{children:"Download the token from the list of identities. This is a JWT token which we will use later to securely enroll with our Ziti network."}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"configure-appwans",children:"Configure AppWANs"}),"\n",(0,r.jsx)(i.p,{children:"This is policy based management of authorization between your seucre identities and your Ziti Services - determines which devices or users you want to authorize to use which services, in a least privileged access architecture."}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Create a new AppWAN from Ziti web console"}),"\n",(0,r.jsx)(i.li,{children:"Link the identity and service configured earlier"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"integrate-sdk-in-android-app",children:"Integrate SDK in Android App"}),"\n",(0,r.jsx)(i.p,{children:"Buildscript \u2192 repositories"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:'mavenCentral()\n\nmaven \\{ url =\xa0**"https://netfoundry.jfrog.io/netfoundry/ziti-maven"**\xa0\xa0\\}\n'})}),"\n",(0,r.jsx)(i.h3,{id:"add-ziti-dependency",children:"Add Ziti Dependency"}),"\n",(0,r.jsx)(i.p,{children:"In your Android studio,\xa0 project-level build.gradle file add ziti repositories as follows :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:'Buildscript \u2192 repositories\nmavenCentral()\nmaven { url = "https://netfoundry.jfrog.io/netfoundry/ziti-maven"  }\n\nAllprojects  \u2192 repositories\nmavenCentral()\nmaven { url = "https://netfoundry.jfrog.io/netfoundry/ziti-maven"  }\n'})}),"\n",(0,r.jsx)(i.p,{children:"Add dependency in module level build.gradle file as follows :"}),"\n",(0,r.jsx)(i.p,{children:'dependencies\nimplementation "io.netfoundry.ziti:ziti:0.+"'}),"\n",(0,r.jsx)(i.h3,{id:"initialize-ziti",children:"Initialize Ziti"}),"\n",(0,r.jsx)(i.p,{children:"Ziti should be initialized when you launch your app so place the following code appropriate to your project."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:'    private KeyStore ks;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n       ks = KeyStore.getInstance("AndroidKeyStore");\n       ks.load(null);\n       // Initialize Ziti\n       Ziti.init(ks, true);\n\n'})}),"\n",(0,r.jsxs)(i.p,{children:["Ziti Init returns List ",(0,r.jsx)(i.code,{children:"<ZitiContext>"})," \xa0Object\xa0 so if the list is empty it means that device is not enrolled to Ziti network."]}),"\n",(0,r.jsx)(i.h3,{id:"enroll-identity",children:"Enroll Identity"}),"\n",(0,r.jsx)(i.p,{children:"To enroll application you need to call the following method :"}),"\n",(0,r.jsxs)(i.p,{children:["Ziti.",(0,r.jsx)(i.em,{children:"enroll"}),"(",(0,r.jsx)(i.strong,{children:"ks"}),", jwt, name);"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Ks is the keystore.\xa0"}),"\n",(0,r.jsx)(i.li,{children:"Jwt is the token we obtained from the downloaded file from identity\xa0"}),"\n",(0,r.jsx)(i.li,{children:"name is the name of the android device."}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Referring to the Service in the mobile app:\xa0"}),"\n",(0,r.jsxs)(i.p,{children:["Now that the device is enrolled and Ziti initialized, you can refer to the application service via Ziti service name using the service host name configured earlier - ",(0,r.jsx)(i.a,{href:"http://backend-server/api",children:(0,r.jsx)(i.strong,{children:"http://backend-server/api"})})]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"That's it! We have successfully embedded zero trust networking inside our point of sale app.\xa0 Now it will be secure on any device and any network."})}),"\n",(0,r.jsxs)(i.p,{children:["Github source code repo: ",(0,r.jsx)(i.a,{href:"https://github.com/netfoundry/ziti-demos-mpos",children:"https://github.com/netfoundry/ziti-demos-mpos"})]})]})}function p(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},13056:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/oS2wUTgbT-285e0ef96e6a030b02fa88b3f5cb377e.png"},65224:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/BCbr4KcjC-83ec9d7111fc161b1089a11e15236f79.png"},28453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>a});var t=n(96540);const r={},o=t.createContext(r);function s(e){const i=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:i},e.children)}},5852:e=>{e.exports=JSON.parse('{"permalink":"/docs/openziti/blog/mobile-point-of-sale-mpos-app-ziti-android-java-sdk-integration","source":"@site/blog/mobile-point-of-sale-mpos-app-ziti-android-java-sdk-integration.md","title":"Mobile Point of Sale (mPOS) app \u2013 embed zero trust networking","description":"Mobile Point of Sale (mPOS) app \u2013 embed zero trust networking","date":"2020-03-19T00:00:00.000Z","tags":[{"inline":false,"label":"Mobile","permalink":"/docs/openziti/blog/tags/mobile","description":"Mobile application development and usage"},{"inline":false,"label":"Zero Trust","permalink":"/docs/openziti/blog/tags/zero-trust","description":"Zero Trust Security"},{"inline":false,"label":"Android","permalink":"/docs/openziti/blog/tags/android","description":"Android development and integrations"},{"inline":false,"label":"Java","permalink":"/docs/openziti/blog/tags/java","description":"Java content"},{"inline":false,"label":"SDK","permalink":"/docs/openziti/blog/tags/sdk","description":"Software Development Kits"}],"readingTime":4.04,"hasTruncateMarker":true,"authors":[{"name":"Curt Tudor","title":"Author","url":"https://github.com/rentallect","imageURL":"https://avatars.githubusercontent.com/rentallect","key":"CurtTudor","page":null}],"frontMatter":{"slug":"mobile-point-of-sale-mpos-app-ziti-android-java-sdk-integration","title":"Mobile Point of Sale (mPOS) app \u2013 embed zero trust networking","authors":["CurtTudor"],"date":"2020-03-19T00:00:00.000Z","tags":["mobile","zero-trust","android","java","sdk"]},"unlisted":false,"prevItem":{"title":"Zitification","permalink":"/docs/openziti/blog/zitification"}}')}}]);