"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[4176],{39525:(e,t,n)=>{n.d(t,{Ay:()=>d,RM:()=>r});var i=n(74848),s=n(28453);const r=[{value:"For Tunnelers",id:"for-tunnelers",level:4},{value:"For BrowZer",id:"for-browzer",level:4},{value:"For Ziti Admin Console (ZAC)",id:"for-ziti-admin-console-zac",level:4}];function a(e){const t={a:"a",code:"code",h4:"h4",p:"p",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.a,{href:"https://oauth.net/2/pkce/",children:"Authorization Code Flow with PKCE or PKCE flow"})," requires configuring callback URLs the\r\nIdentity Provider (IdP) will allow redirecting to. If the URL for a specific client is not specifically listed, the IdP\r\nwill deny the authentication request. Depending on the technology used to authenticate to the OpenZiti Network,\r\ndifferent URLs need to be specified. More than one URL is allowed to be configured. Decide if you are configuring the\r\nIdP for use with tunnelers, with BrowZer or with both and add the appropriate callback urls."]}),"\n",(0,i.jsx)(t.p,{children:'In the Auth0 dashboard, with the application selected, choose the "Settings" tab and scroll down to the "Application\r\nURIs" section and add the URLs.'}),"\n",(0,i.jsx)(t.h4,{id:"for-tunnelers",children:"For Tunnelers"}),"\n",(0,i.jsxs)(t.p,{children:["Tunnelers require an allowed callback URL of: ",(0,i.jsx)(t.code,{children:"http://localhost:20314/auth/callback"}),"."]}),"\n",(0,i.jsx)(t.h4,{id:"for-browzer",children:"For BrowZer"}),"\n",(0,i.jsxs)(t.p,{children:["The URL to configure for BrowZer will vary depending on the BrowZer configuration. BrowZer requires a wildcard\r\ncertificate in order to be deployed and all services are delivered from this wildcard domain. You will need to add\r\nthe configured ",(0,i.jsx)(t.a,{href:"/docs/learn/quickstarts/browzer/example/#get-a-wildcard-certificate",children:"wildcard domain"})," as the\r\ncallback url."]}),"\n",(0,i.jsx)(t.h4,{id:"for-ziti-admin-console-zac",children:"For Ziti Admin Console (ZAC)"}),"\n",(0,i.jsxs)(t.p,{children:["The URL to configure an IdP for so that ZAC will be able to authenticate will depend on how you deploy your ZAC. The\r\ncurrent method recommended to deploy ZAC will deploy it on the same URL as the controller. For example:\r\n",(0,i.jsx)(t.a,{href:"https://controller.example.com/zac/callback",children:"https://controller.example.com/zac/callback"})]})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},82363:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"guides/external-auth/identity-providers/auth0","title":"Auth0","description":"Configure Auth0 for with OpenZiti","source":"@site/docs/guides/external-auth/identity-providers/auth0.mdx","sourceDirName":"guides/external-auth/identity-providers","slug":"/guides/external-auth/identity-providers/auth0","permalink":"/docs/guides/external-auth/identity-providers/auth0","draft":false,"unlisted":false,"editUrl":"https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/guides/external-auth/identity-providers/auth0.mdx","tags":[],"version":"current","lastUpdatedAt":1754933799000,"frontMatter":{"title":"Auth0","description":"Configure Auth0 for with OpenZiti","hide_table_of_contents":true},"sidebar":"docsSidebar","previous":{"title":"Identity Providers","permalink":"/docs/guides/external-auth/identity-providers/"},"next":{"title":"Authelia","permalink":"/docs/guides/external-auth/identity-providers/authelia"}}');var s=n(74848),r=n(28453),a=n(39525);n(84971);const d={title:"Auth0",description:"Configure Auth0 for with OpenZiti",hide_table_of_contents:!0},o="Auth0",l={},c=[{value:"Get an Auth0 Account",id:"get-an-auth0-account",level:2},{value:"Add an Application (if necessary)",id:"add-an-application-if-necessary",level:2},{value:"Choose the Type of Application",id:"choose-the-type-of-application",level:3},{value:"Callback URLs",id:"callback-urls",level:3},...a.RM,{value:"Add a New API",id:"add-a-new-api",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"auth0",children:"Auth0"})}),"\n",(0,s.jsx)("img",{src:"/icons/logo-auth0.svg",alt:"Auth0 logo",height:"100px"}),"\n",(0,s.jsxs)(t.p,{children:["This section illustrates where the expected values are found within the ",(0,s.jsx)(t.a,{href:"https://auth0.com/",children:"Auth0 dashboards"}),". For a\nmore detailed guide on creating an Auth0 application and API, see below.  Use these values to configure an external JWT\nsigner."]}),"\n",(0,s.jsx)(t.div,{className:"code-section",children:(0,s.jsxs)(t.div,{className:"code-section-code",children:[(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example Auth0 OpenID Discovery Endpoint"})}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"https://${tenant}.${region}.auth0.com/.well-known/openid-configuration\n"})})]})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Field"}),(0,s.jsx)(t.th,{children:"Where to Find the Value"}),(0,s.jsx)(t.th,{children:"Example"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Issuer"})}),(0,s.jsxs)(t.td,{children:["Application Settings in ",(0,s.jsx)(t.strong,{children:"Basic Information"}),". The ",(0,s.jsx)(t.strong,{children:"Domain"}),' of the app prefixed with "https://"']}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://dev-k1gpd4wpyslypklr.us.auth0.com/",children:"https://dev-k1gpd4wpyslypklr.us.auth0.com/"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Client ID"})}),(0,s.jsxs)(t.td,{children:["Application Settings in ",(0,s.jsx)(t.strong,{children:"Basic Information"}),". The ",(0,s.jsx)(t.strong,{children:"Client ID"})]}),(0,s.jsx)(t.td,{children:"HTgNgEjHR9Q3krXiShYsrVOh6pRNrtH0q"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Audience"})}),(0,s.jsxs)(t.td,{children:["The ",(0,s.jsx)(t.strong,{children:"API Audience"})," on the APIs dashboard or in ",(0,s.jsx)(t.strong,{children:"General Settings"})," as the ",(0,s.jsx)(t.strong,{children:"Identifier"})," of the API"]}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://your.openziti.controller.example.io",children:"https://your.openziti.controller.example.io"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"External Auth URL"})}),(0,s.jsxs)(t.td,{children:["The same value as the ",(0,s.jsx)(t.strong,{children:"Issuer"})]}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://dev-k1gpd4wpyslypklr.us.auth0.com/",children:"https://dev-k1gpd4wpyslypklr.us.auth0.com/"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"JWKS Endpoint"})}),(0,s.jsxs)(t.td,{children:["Use the ",(0,s.jsx)(t.code,{children:"jwks_uri"}),' field from the OpenID discovery endpoint. Often the Auth0 domain + ".well-known/jwks.json"']}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://dev-k1gpd4wpyslypklr.us.auth0.com/.well-known/jwks.json",children:"https://dev-k1gpd4wpyslypklr.us.auth0.com/.well-known/jwks.json"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Claims Property"})}),(0,s.jsxs)(t.td,{children:["Often ",(0,s.jsx)(t.code,{children:"email"}),", but can also be ",(0,s.jsx)(t.code,{children:"sub"})," or any other claim contained in the JWT"]}),(0,s.jsx)(t.td,{children:"email"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Scopes"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"openid"})," included by default then any other standard or custom scope such as ",(0,s.jsx)(t.code,{children:"email"}),", ",(0,s.jsx)(t.code,{children:"profile"}),"etc."]}),(0,s.jsx)(t.td,{children:"profile offline_access"})]})]})]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"get-an-auth0-account",children:"Get an Auth0 Account"}),"\n",(0,s.jsxs)(t.p,{children:["If you don't already have an account you can sign up for a free account at ",(0,s.jsx)(t.a,{href:"https://auth0.com/signup",children:"https://auth0.com/signup"})]}),"\n",(0,s.jsx)(t.h2,{id:"add-an-application-if-necessary",children:"Add an Application (if necessary)"}),"\n",(0,s.jsxs)(t.p,{children:["Once you have an Auth0 account, expand ",(0,s.jsx)(t.strong,{children:"Application"}),", choose ",(0,s.jsx)(t.strong,{children:"Applications"})," again in the left navbar then find the\n",(0,s.jsx)(t.strong,{children:"Create Application"})," button and click it:"]}),"\n",(0,s.jsx)(t.admonition,{title:"Add Application",type:"info",children:(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Auth0 Applications",src:n(19092).A+"",width:"1212",height:"683"})})}),"\n",(0,s.jsx)(t.h3,{id:"choose-the-type-of-application",children:"Choose the Type of Application"}),"\n",(0,s.jsxs)(t.p,{children:["Give the application a name, then choose ",(0,s.jsx)(t.strong,{children:"Single Page Web Applications"})," and click ",(0,s.jsx)(t.strong,{children:"Create"}),"."]}),"\n",(0,s.jsx)(t.admonition,{title:"Choose Application Type",type:"info",children:(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Auth0 Applications",src:n(62303).A+"",width:"749",height:"670"})})}),"\n",(0,s.jsxs)(t.p,{children:["Ignore the Quickstart tab and simply select the ",(0,s.jsx)(t.strong,{children:"Settings"})," tab to proceed."]}),"\n",(0,s.jsx)(t.admonition,{title:"Skip Quickstart Type Selection",type:"info",children:(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Auth0 Applications",src:n(1841).A+"",width:"1031",height:"762"})})}),"\n",(0,s.jsx)(t.h3,{id:"callback-urls",children:"Callback URLs"}),"\n",(0,s.jsx)(a.Ay,{}),"\n",(0,s.jsxs)(t.p,{children:["From the ",(0,s.jsx)(t.strong,{children:"Settings"})," tab in the Auth0 portal, scroll down until you find the ",(0,s.jsx)(t.strong,{children:"Application URIs"})," section and add the\nURIs appropriate for the features you are enabling."]}),"\n",(0,s.jsx)(t.admonition,{title:"Example Callback URLs",type:"info",children:(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Auth0 callbacks",src:n(15848).A+"",width:"953",height:"685"})})}),"\n",(0,s.jsx)(t.h2,{id:"add-a-new-api",children:"Add a New API"}),"\n",(0,s.jsxs)(t.p,{children:["When using ext-jwt-signers with OIDC, OpenZiti validates the security token presented is intended for OpenZiti by\nlooking for and using the ",(0,s.jsx)(t.code,{children:"aud"})," (audience) field of the JWT.  This requires the token (the JWT) to have an audience\nspecified and the ext-jwt-signer to match that audience. For Auth0, this is accomplished by creating an ",(0,s.jsx)(t.strong,{children:"API"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["From the left navbar in the Auth0 dashboard, click on ",(0,s.jsx)(t.code,{children:"Application"})," -> ",(0,s.jsx)(t.code,{children:"APIs"})," -> ",(0,s.jsx)(t.code,{children:"Create API"})]}),"\n",(0,s.jsx)(t.admonition,{title:"Create API",type:"info",children:(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Auth0 Applications",src:n(76661).A+"",width:"1305",height:"391"})})}),"\n",(0,s.jsxs)(t.p,{children:["Any name can be used but as the UI indicates the ",(0,s.jsx)(t.code,{children:"Identifier*"})," field is used as the ",(0,s.jsx)(t.code,{children:"aud"}),"ience field of the JWT\nafter successful authentication. Choose RFC 9068 as the JSON Web Token Profile."]}),"\n",(0,s.jsx)(t.admonition,{title:"Create API",type:"info",children:(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Auth0 clientId",src:n(28249).A+"",width:"605",height:"719"})})})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},84971:(e,t,n)=>{n.d(t,{A:()=>f});var i=n(96540),s=n(34164),r=n(63427),a=n(92303),d=n(41422);const o={details:"details_lb9f",isBrowser:"isBrowser_bmU9",collapsibleContent:"collapsibleContent_i85q"};var l=n(74848);function c(e){return!!e&&("SUMMARY"===e.tagName||c(e.parentElement))}function h(e,t){return!!e&&(e===t||h(e.parentElement,t))}function p({summary:e,children:t,...n}){(0,r.A)().collectAnchor(n.id);const p=(0,a.A)(),u=(0,i.useRef)(null),{collapsed:x,setCollapsed:j}=(0,d.u)({initialState:!n.open}),[f,g]=(0,i.useState)(n.open),m=i.isValidElement(e)?e:(0,l.jsx)("summary",{children:e??"Details"});return(0,l.jsxs)("details",{...n,ref:u,open:f,"data-collapsed":x,className:(0,s.A)(o.details,p&&o.isBrowser,n.className),onMouseDown:e=>{c(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;c(t)&&h(t,u.current)&&(e.preventDefault(),x?(j(!1),g(!0)):j(!0))},children:[m,(0,l.jsx)(d.N,{lazy:!1,collapsed:x,onCollapseTransitionEnd:e=>{j(e),g(!e)},children:(0,l.jsx)("div",{className:o.collapsibleContent,children:t})})]})}const u={details:"details_b_Ee"},x="alert alert--info";function j({...e}){return(0,l.jsx)(p,{...e,className:(0,s.A)(x,u.details,e.className)})}function f(e){const t=i.Children.toArray(e.children),n=t.find((e=>i.isValidElement(e)&&"summary"===e.type)),s=(0,l.jsx)(l.Fragment,{children:t.filter((e=>e!==n))});return(0,l.jsx)(j,{...e,summary:n,children:s})}},28249:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/api-details-f6b925d0f9b9393c7dd883f374af8dda.png"},15848:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/callbacks-5dffefaf3234b0da1ab42c5b2086494b.png"},76661:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/create-api-b6ea86d1bab8a5e6ede8020a6dcba7f4.png"},19092:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/create-app-e0a8058ae88d8e0e415f1bc26eb2be03.png"},62303:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/create-spa-b0fa595c42c16ac1ff58936e3f5a3956.png"},1841:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/skip-quickstart-a9182d9dbcce16d945e092cf173e2c7a.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>d});var i=n(96540);const s={},r=i.createContext(s);function a(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);