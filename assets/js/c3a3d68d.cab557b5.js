"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[47963],{52403:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var s=i(49285),o=i(74848),t=i(28453);const r={title:"Limitless zrok with Docker",date:new Date("2024-05-22T20:00:34.000Z"),cuid:"clwi90z8q000e09m6bzop4hr1",slug:"limitless-zrok-with-docker",authors:["KennethBingham"],image:"@site/blogs/openziti/v1716328568062/8df0ac72-be9a-471b-ac5e-3f03e21a8ae3.png",imageDark:"@site/blogs/openziti/v1716328568062/8df0ac72-be9a-471b-ac5e-3f03e21a8ae3.png",tags:["self-hosted","docker-compose","openziti","zrok","tunneling"]},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"What&#39;s This Good For?",id:"whats-this-good-for",level:2},{value:"The Needful Things",id:"the-needful-things",level:2},{value:"The Short Version",id:"the-short-version",level:2},{value:"Enable Caddy TLS",id:"enable-caddy-tls",level:2},{value:"The Longer Version",id:"the-longer-version",level:2},{value:"Get in Touch",id:"get-in-touch",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"You can conveniently run a zrok instance on a Linux server. The Caddy option makes it easy to auto-renew a wildcard certificate to protect the zrok API and your public shares with TLS."}),"\n",(0,o.jsx)(n.h2,{id:"whats-this-good-for",children:"What's This Good For?"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://docs.zrok.io/docs/concepts/sharing-public/",children:"You can publicly share websites, files, etc."}),", with auth from your computers without punching holes in their inbound firewalls. This is called reverse tunneling. Your Linux server is public and acts as a relay."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://docs.zrok.io/docs/concepts/sharing-private/",children:"You can privately share TCP/UDP services or create a VPN"}),". You must give the other party an account on your instance. This is excellent for multi-player games, etc."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"No limits"})," \u2014 Maximize the use of your available bandwidth and compute."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Data sovereignty"})," \u2014 Assuming you control your server, no third parties can access your data."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Availability"})," \u2014 You control upgrades and uptime...which can be a double-edged sword!"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"the-needful-things",children:"The Needful Things"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://docs.docker.com/engine/install/",children:"Install Docker on your Linux"})," server."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Create a wildcard record in the zrok DNS zone for your Linux server's public IP address."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"to enable Caddy TLS, you'll need an API token from your DNS provider."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"the-short-version",children:"The Short Version"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl https://get.openziti.io/zrok-instance/fetch.bash | bash\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Then, configure your environment with an ",(0,o.jsx)(n.code,{children:".env"})," file"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ZROK_DNS_ZONE=share.example.com\n\nZROK_USER_EMAIL=me@example.com\nZROK_USER_PWD=zrokuserpw\n\nZITI_PWD=zitiadminpw\nZROK_ADMIN_TOKEN=zroktoken\n\n# if you don't plan to enable Caddy TLS,\n#  set this to publish insecure ports\nZROK_INSECURE_INTERFACE=0.0.0.0\n"})}),"\n",(0,o.jsx)(n.p,{children:"...and start the containers."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker compose up --build\n"})}),"\n",(0,o.jsx)(n.h2,{id:"enable-caddy-tls",children:"Enable Caddy TLS"}),"\n",(0,o.jsxs)(n.p,{children:["If you have an API token from your DNS provider, you can add these values to your ",(0,o.jsx)(n.code,{children:".env"})," file to configure Caddy to auto-renew a wildcard certificate for your zrok DNS zone."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"CADDY_DNS_PLUGIN=cloudflare\nCADDY_DNS_PLUGIN_TOKEN=abcd1234\n"})}),"\n",(0,o.jsx)(n.p,{children:"Enable Caddy by renaming the extra compose file."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mv caddy.compose.override.yml compose.override.yml\n"})}),"\n",(0,o.jsx)(n.p,{children:"Restart the containers."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker compose up --build --force-recreate\n"})}),"\n",(0,o.jsx)(n.h2,{id:"the-longer-version",children:"The Longer Version"}),"\n",(0,o.jsx)("iframe",{width:"100%",height:"315",src:"https://www.youtube.com/embed/70zJ_h4uiD8"}),"\n",(0,o.jsxs)(n.p,{children:["Here's ",(0,o.jsx)(n.a,{href:"https://docs.zrok.io/docs/guides/self-hosting/docker/",children:"a link to the full guide"})," used in the video."]}),"\n",(0,o.jsx)(n.h2,{id:"get-in-touch",children:"Get in Touch"}),"\n",(0,o.jsxs)(n.p,{children:["Visit us in ",(0,o.jsx)(n.a,{href:"https://openziti.discourse.group/",children:"our Discourse community"})," if you have any ideas or questions."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var s=i(96540);const o={},t=s.createContext(o);function r(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(t.Provider,{value:n},e.children)}},49285:e=>{e.exports=JSON.parse('{"permalink":"/docs/openziti/blog/limitless-zrok-with-docker","source":"@site/blog/limitless-zrok-with-docker.md","title":"Limitless zrok with Docker","description":"You can conveniently run a zrok instance on a Linux server. The Caddy option makes it easy to auto-renew a wildcard certificate to protect the zrok API and your public shares with TLS.","date":"2024-05-22T20:00:34.000Z","tags":[{"inline":false,"label":"Self Hosted","permalink":"/docs/openziti/blog/tags/self-hosted","description":"Self-hosted setups"},{"inline":false,"label":"Docker Compose","permalink":"/docs/openziti/blog/tags/docker-compose","description":"Docker Compose"},{"inline":false,"label":"OpenZiti","permalink":"/docs/openziti/blog/tags/openziti","description":"OpenZiti related content"},{"inline":false,"label":"zrok","permalink":"/docs/openziti/blog/tags/zrok","description":"zrok related content"},{"inline":false,"label":"Tunneling","permalink":"/docs/openziti/blog/tags/tunneling","description":"Network tunneling"}],"readingTime":1.82,"hasTruncateMarker":true,"authors":[{"name":"Kenneth Bingham","title":"Author","url":"https://github.com/qrkourier","imageURL":"https://avatars.githubusercontent.com/qrkourier","key":"KennethBingham","page":null}],"frontMatter":{"title":"Limitless zrok with Docker","date":"2024-05-22T20:00:34.000Z","cuid":"clwi90z8q000e09m6bzop4hr1","slug":"limitless-zrok-with-docker","authors":["KennethBingham"],"image":"@site/blogs/openziti/v1716328568062/8df0ac72-be9a-471b-ac5e-3f03e21a8ae3.png","imageDark":"@site/blogs/openziti/v1716328568062/8df0ac72-be9a-471b-ac5e-3f03e21a8ae3.png","tags":["self-hosted","docker-compose","openziti","zrok","tunneling"]},"unlisted":false,"prevItem":{"title":"Why We Verify GitHub Commits","permalink":"/docs/openziti/blog/why-we-verify-github-commits"},"nextItem":{"title":"How to Prevent Path Traversal Attacks with OpenZiti BrowZer","permalink":"/docs/openziti/blog/how-to-prevent-path-traversal-attacks-with-openziti-browzer"}}')}}]);