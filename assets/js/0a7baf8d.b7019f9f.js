"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[11312],{97124:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"learn/core-concepts/metrics/inspect","title":"On Demand","description":"The controller supports pulling metrics on demand via the inspections framework.","source":"@site/docs/learn/core-concepts/metrics/30-inspect.md","sourceDirName":"learn/core-concepts/metrics","slug":"/learn/core-concepts/metrics/inspect","permalink":"/docs/openziti/learn/core-concepts/metrics/inspect","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"File Reporter","permalink":"/docs/openziti/learn/core-concepts/metrics/file"},"next":{"title":"Prometheus Endpoint","permalink":"/docs/openziti/learn/core-concepts/metrics/prometheus"}}');var s=t(74848),r=t(28453);const o={},c="On Demand",l={},a=[{value:"Ziti Command Line",id:"ziti-command-line",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"on-demand",children:"On Demand"})}),"\n",(0,s.jsxs)(n.p,{children:["The controller supports pulling metrics on demand via the ",(0,s.jsx)(n.code,{children:"inspections"})," framework."]}),"\n",(0,s.jsx)(n.p,{children:"The inspections framework is part of the fabric API, hosted by the controller. The fabric API binding will need to be enabled in the controller configuration file for this to work."}),"\n",(0,s.jsx)(n.h2,{id:"ziti-command-line",children:"Ziti Command Line"}),"\n",(0,s.jsx)(n.p,{children:"The Ziti fabric CLI has support for the inspect command built in.  Here's an example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"ziti fabric inspect '.*' metrics:json\n"})}),"\n",(0,s.jsx)(n.p,{children:"Let's break that command down a bit:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ziti fabric inspect:"})," The base fabric inspect command."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:".*:"})," The network components to inspect.  .* inspects everything,  other options include:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ctrl_client:"})," Just the controller"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Router Id:"})," Just a single router"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"metrics:json:"})," Get metrics in json format.  Other formats include:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"prometheus:"})," Get metrics in the Prometheus ",(0,s.jsx)(n.a,{href:"https://prometheus.io/docs/instrumenting/exposition_formats/#text-based-format",children:"text exposition format"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The default CLI result will strip json markup.  Add ",(0,s.jsx)(n.code,{children:"-j"})," to the inspect command to get the raw json output."]})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var i=t(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);