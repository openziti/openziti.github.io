"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[28026],{85444:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var r=n(23090),o=n(74848),t=n(28453);const s={title:"The zrok Drives CLI Preview",date:new Date("2024-01-25T20:08:29.000Z"),cuid:"clrtncncs000809lg42ombo9g",slug:"the-zrok-drives-cli-preview",authors:["MichaelQuigley"],image:"@site/blogs/openziti/v1706115688489/7aef0bb7-51e7-45e2-bc95-f65ec3149116.png",imageDark:"@site/blogs/openziti/v1706115688489/7aef0bb7-51e7-45e2-bc95-f65ec3149116.png",tags:["security","networking","storage","peer-to-peer","zrok"]},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"zrok Drives",id:"zrok-drives",level:2},{value:"The New CLI",id:"the-new-cli",level:2}];function d(e){const i={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components},{LiteYouTubeEmbed:n}=i;return n||function(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("LiteYouTubeEmbed",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.p,{children:["With the release of ",(0,o.jsx)(i.code,{children:"v0.4.23"}),", zrok now includes a set of CLI commands that simplifies the management of zrok virtual\ndrives. This is an early preview of the full set of zrok Drives tools."]}),"\n",(0,o.jsxs)(i.p,{children:["If this is your first time enountering zrok, check out the ",(0,o.jsx)(i.a,{href:"./tags/zrok",children:"entire zrok series"})," here on the ",(0,o.jsx)(i.a,{href:"./",children:"OpenZiti blog"}),". Also take a look at the ",(0,o.jsx)(i.a,{href:"https://docs.zrok.io/docs/getting-started",children:"Getting Started guide"}),"."]}),"\n",(0,o.jsx)(i.h2,{id:"zrok-drives",children:"zrok Drives"}),"\n",(0,o.jsxs)(i.p,{children:["Back in November, we rolled out an early preview of the new zrok ",(0,o.jsx)(i.code,{children:"drive"})," backend, which introduced our first preview of secure, simple, peer-to-peer virtual network drives functionality."]}),"\n",(0,o.jsx)(i.p,{children:"The short version of the story is that the zrok drives feature introduces the ability to turn any folder on any computer, anywhere on the network, into a secure virtual network drive. The current implementation is based on WebDAV, but we've got additional implementations in the pipeline, including an S3-compatible interface."}),"\n",(0,o.jsx)(i.p,{children:"The first preview of zrok drives allowed a zrok drives share to be accessed by any software or system that can work with WebDAV. This includes Windows Explorer, macOS Finder, and various Linux graphical desktops including Gnome Nautilus."}),"\n",(0,o.jsxs)(i.p,{children:["Check out the previous ",(0,o.jsx)(i.a,{href:"./zrok-drives-an-early-preview",children:"blog post"})," for more details about ",(0,o.jsx)(i.a,{href:"./zrok-drives-an-early-preview",children:"zrok Drives"}),"."]}),"\n",(0,o.jsx)(i.h2,{id:"the-new-cli",children:"The New CLI"}),"\n",(0,o.jsxs)(i.p,{children:["The new CLI tools released with ",(0,o.jsx)(i.code,{children:"v0.4.23"})," include a set of commands that should be familiar to most Linux shell users.. ",(0,o.jsx)(i.code,{children:"zrok cp"}),", ",(0,o.jsx)(i.code,{children:"zrok ls"}),", ",(0,o.jsx)(i.code,{children:"zrok rm"}),", and ",(0,o.jsx)(i.code,{children:"zrok mkdir"}),". These commands let you copy files to, from and between virtual network drives."]}),"\n",(0,o.jsx)(i.p,{children:"These commands allow you to work with any combination of:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"the local filesystem"}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"non-zrok WebDAV implementations"}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"zrok public drives"}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"zrok private drives"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["The current implementation is a preview and likely contains bugs. Getting the ergonomics and semantics to work perfectly, consistently across all of the types of storage that are supported is tricky. We'll get it right in time. So, if you run into something, file an issue at the ",(0,o.jsx)(i.a,{href:"https://github.com/openziti/zrok",children:"zrok GitHub repository"}),"."]}),"\n",(0,o.jsx)(i.p,{children:"Let's take a look at what kinds of things these tools can do."}),"\n",(0,o.jsx)(i.p,{children:"First we create a virtual drive like this:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-plaintext",children:"$ mkdir /tmp/junk\n$ zrok share private --headless --backend-mode drive /tmp/junk\n[   0.124]    INFO sdk-golang/ziti.(*listenerManager).createSessionWithBackoff: {session token=[cf640aac-2706-49ae-9cc9-9a497d67d9c5]} new service session\n[   0.145]    INFO main.(*sharePrivateCommand).run: allow other to access your share with the following command:\nzrok access private wkcfb58vj51l\n"})}),"\n",(0,o.jsx)(i.p,{children:"You can use the new CLI commands to easily copy files to and from zrok drives like this:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-plaintext",children:"$ zrok copy LICENSE zrok://wkcfb58vj51l\n[   0.119]    INFO zrok/drives/sync.OneWay: => /LICENSE\ncopy complete!\n\n$ zrok ls zrok://wkcfb58vj51l\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TYPE \u2502 NAME    \u2502 SIZE    \u2502 MODIFIED                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      \u2502 LICENSE \u2502 11.3 kB \u2502 2024-01-19 12:16:46 -0500 EST \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n$ zrok mkdir zrok://wkcfb58vj51l/stuff\n$ zrok ls zrok://wkcfb58vj51l\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TYPE \u2502 NAME    \u2502 SIZE    \u2502 MODIFIED                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      \u2502 LICENSE \u2502 11.3 kB \u2502 2024-01-19 12:16:46 -0500 EST \u2502\n\u2502 DIR  \u2502 stuff   \u2502         \u2502                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,o.jsx)(i.p,{children:"Copying to and from zrok drives and manipulating files and folders is very similar to the usual shell commands that most technical computer users are already familiar with."}),"\n",(0,o.jsx)(i.p,{children:"The new CLI also supports a convenient one-way synchronization tool that is useful for ensuring that entire file trees are synchronized:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-plaintext",children:"$ ls -l util/\ntotal 20\n-rw-rw-r-- 1 michael michael 329 Jul 21 13:17 email.go\n-rw-rw-r-- 1 michael michael 456 Jul 21 13:17 headers.go\n-rw-rw-r-- 1 michael michael 609 Jul 21 13:17 proxy.go\n-rw-rw-r-- 1 michael michael 361 Jul 21 13:17 size.go\n-rw-rw-r-- 1 michael michael 423 Jan  2 11:57 uniqueName.go\n\n$ zrok copy util/ zrok://wkcfb58vj51l/stuff\n[   0.123]    INFO zrok/drives/sync.OneWay: => /email.go\n[   0.194]    INFO zrok/drives/sync.OneWay: => /headers.go\n[   0.267]    INFO zrok/drives/sync.OneWay: => /proxy.go\n[   0.337]    INFO zrok/drives/sync.OneWay: => /size.go\n[   0.408]    INFO zrok/drives/sync.OneWay: => /uniqueName.go\ncopy complete!\n\n$ zrok ls zrok://wkcfb58vj51l/stuff\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TYPE \u2502 NAME          \u2502 SIZE  \u2502 MODIFIED                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      \u2502 email.go      \u2502 329 B \u2502 2024-01-19 12:26:45 -0500 EST \u2502\n\u2502      \u2502 headers.go    \u2502 456 B \u2502 2024-01-19 12:26:45 -0500 EST \u2502\n\u2502      \u2502 proxy.go      \u2502 609 B \u2502 2024-01-19 12:26:45 -0500 EST \u2502\n\u2502      \u2502 size.go       \u2502 361 B \u2502 2024-01-19 12:26:45 -0500 EST \u2502\n\u2502      \u2502 uniqueName.go \u2502 423 B \u2502 2024-01-19 12:26:45 -0500 EST \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n$ zrok copy util/ zrok://wkcfb58vj51l/stuff --sync\ncopy complete!\n"})}),"\n",(0,o.jsx)(i.p,{children:"I recently put out an office hours video showing these tools in action:"}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(n,{id:"4Moyt2IWpCk",title:"YouTube video"})}),"\n",(0,o.jsx)(i.p,{children:"We also get into a little bit of golang code in the process. It's a fairly short watch at 20 minutes."}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.a,{href:"https://docs.zrok.io/docs/guides/drives/cli/",children:"A detailed guide"})," for these commands is available at the ",(0,o.jsx)(i.a,{href:"https://docs.zrok.io/",children:"zrok documentation site"}),"."]}),"\n",(0,o.jsxs)(i.p,{children:["If you're a fan of zrok and you find these features useful, we always appreciate a star on the ",(0,o.jsx)(i.a,{href:"https://github.com/openziti/zrok",children:"zrok repository on GitHub"}),"!"]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>a});var r=n(96540);const o={},t=r.createContext(o);function s(e){const i=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(t.Provider,{value:i},e.children)}},23090:e=>{e.exports=JSON.parse('{"permalink":"/docs/openziti/blog/the-zrok-drives-cli-preview","source":"@site/blog/the-zrok-drives-cli-preview.md","title":"The zrok Drives CLI Preview","description":"With the release of v0.4.23, zrok now includes a set of CLI commands that simplifies the management of zrok virtual","date":"2024-01-25T20:08:29.000Z","tags":[{"inline":false,"label":"Security","permalink":"/docs/openziti/blog/tags/security","description":"Security-related posts"},{"inline":false,"label":"Networking","permalink":"/docs/openziti/blog/tags/networking","description":"Networking related posts"},{"inline":false,"label":"Storage","permalink":"/docs/openziti/blog/tags/storage","description":"Storage topics"},{"inline":false,"label":"Peer-to-Peer","permalink":"/docs/openziti/blog/tags/peer-to-peer","description":"Peer-to-peer networking"},{"inline":false,"label":"zrok","permalink":"/docs/openziti/blog/tags/zrok","description":"zrok related content"}],"readingTime":4,"hasTruncateMarker":true,"authors":[{"name":"Michael Quigley","title":"Author","url":"https://github.com/michaelquigley","imageURL":"https://avatars.githubusercontent.com/michaelquigley","key":"MichaelQuigley","page":null}],"frontMatter":{"title":"The zrok Drives CLI Preview","date":"2024-01-25T20:08:29.000Z","cuid":"clrtncncs000809lg42ombo9g","slug":"the-zrok-drives-cli-preview","authors":["MichaelQuigley"],"image":"@site/blogs/openziti/v1706115688489/7aef0bb7-51e7-45e2-bc95-f65ec3149116.png","imageDark":"@site/blogs/openziti/v1706115688489/7aef0bb7-51e7-45e2-bc95-f65ec3149116.png","tags":["security","networking","storage","peer-to-peer","zrok"]},"unlisted":false,"prevItem":{"title":"Fun with Adaptive Rate Limiting","permalink":"/docs/openziti/blog/fun-with-adaptive-rate-limiting"},"nextItem":{"title":"Minecraft Over zrok","permalink":"/docs/openziti/blog/minecraft-over-zrok"}}')}}]);