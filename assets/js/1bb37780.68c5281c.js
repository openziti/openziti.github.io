"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[4397],{85581:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var r=t(74848),i=t(28453);const s=[];function o(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ziti"})," CLI will help you get an API Session from the controller's management API. You will be prompted to trust any new server certificates. Your login token cache and trust store are managed by the CLI in your home directory."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"# implies https://localhost:1280\nziti edge login -u admin -p admin\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"# implies https://\nziti edge login ctrl.ziti.example.com:8441 -u admin -p admin\n"})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},79486:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>g,contentTitle:()=>f,default:()=>y,frontMatter:()=>m,metadata:()=>r,toc:()=>x});const r=JSON.parse('{"id":"learn/core-concepts/security/authorization/policies/creating-edge-router-policies","title":"creating-edge-router-policies","description":"","source":"@site/docs/learn/core-concepts/security/authorization/policies/creating-edge-router-policies.mdx","sourceDirName":"learn/core-concepts/security/authorization/policies","slug":"/learn/core-concepts/security/authorization/policies/creating-edge-router-policies","permalink":"/docs/learn/core-concepts/security/authorization/policies/creating-edge-router-policies","draft":false,"unlisted":false,"editUrl":"https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/learn/core-concepts/security/authorization/policies/creating-edge-router-policies.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Policies","permalink":"/docs/learn/core-concepts/security/authorization/policies/overview"},"next":{"title":"creating-service-edge-router-policies","permalink":"/docs/learn/core-concepts/security/authorization/policies/creating-service-edge-router-policies"}}');var i=t(74848),s=t(28453),o=t(65537),l=t(79329);function c(e){const n={code:"code",li:"li",ol:"ol",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:'On the left side nav bar, click "Ziti Policies"'}),"\n",(0,i.jsx)(n.li,{children:'It should already be selected, but if not, on the top nav bar, click "Edge Router Policies"'}),"\n",(0,i.jsx)(n.li,{children:'In the top right corner of the screen click the "plus" image to add a new edge router policy'}),"\n",(0,i.jsx)(n.li,{children:'Choose a name for the edge router policy, such as "My edge router policy"'}),"\n",(0,i.jsxs)(n.li,{children:["Enter the edge routers you want to include in the policy","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Specific edge routers can be referenced by ID or name using ",(0,i.jsx)(n.code,{children:"@"}),".  For example, an edge router called ",(0,i.jsx)(n.code,{children:"us-east-4"})," can be referenced using ",(0,i.jsx)(n.code,{children:"@us-east-4"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Edge routers can be referenced by role attribute using ",(0,i.jsx)(n.code,{children:"#"}),". For example, any edge router which has the ",(0,i.jsx)(n.code,{children:"us-seast"})," role attribute will be included if ",(0,i.jsx)(n.code,{children:"#us-east"})," is included in the edge routers roles list."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Enter the identities you want to include in the policy","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Specific identities can be referenced by ID or name using ",(0,i.jsx)(n.code,{children:"@"}),".  For example, as identity called ",(0,i.jsx)(n.code,{children:"jsmith-desktop"})," can be referenced using ",(0,i.jsx)(n.code,{children:"@jsmith-desktop"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Identities can be referenced by role attribute using ",(0,i.jsx)(n.code,{children:"#"}),". For example, any identity which has the ",(0,i.jsx)(n.code,{children:"sales"})," role attribute will be included if ",(0,i.jsx)(n.code,{children:"#sales"})," is included in the identities roles list."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Specify the role semantic","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["If you select ",(0,i.jsx)(n.code,{children:"Has Any Role"})," then if you specify multiple roles then all entities which include ",(0,i.jsx)(n.strong,{children:"any"})," of the roles will be included."]}),"\n",(0,i.jsxs)(n.li,{children:["If you select ",(0,i.jsx)(n.code,{children:"Must Have All Roles"}),", then if you specify multiple roles then only entities which include ",(0,i.jsx)(n.strong,{children:"all"})," of the given roles will be included"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Click save"}),"\n"]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}var u=t(85581);const d=[...u.RM];function h(e){const n={code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"To create an edge router policy using the CLI issue the following commands."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"ensure you are logged in with the CLI."}),"\n",(0,i.jsx)(u.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create an edge router policy named ",(0,i.jsx)(n.code,{children:"my-policy"})," which allows all identities to use all routers."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"ziti edge create edge-router-policy my-policy --identity-roles '#all' --edge-router-roles '#all'\n"})}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}const m={},f=void 0,g={},x=[...d];function b(e){return(0,i.jsxs)(o.A,{children:[(0,i.jsx)(l.A,{value:"tabid-new-edge-router-policy-ui",label:"New edge router policy via UI",children:(0,i.jsx)(a,{})}),(0,i.jsx)(l.A,{value:"tabid-new-edge-router-policy-cli",label:"New edge router policy via CLI",children:(0,i.jsx)(p,{})})]})}function y(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(b,{...e})}):b()}},79329:(e,n,t)=>{t.d(n,{A:()=>o});t(96540);var r=t(34164);const i={tabItem:"tabItem_Ymn6"};var s=t(74848);function o(e){let{children:n,hidden:t,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,o),hidden:t,children:n})}},65537:(e,n,t)=>{t.d(n,{A:()=>w});var r=t(96540),i=t(34164),s=t(65627),o=t(56347),l=t(50372),c=t(30604),a=t(11861),u=t(78749);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:i}}=e;return{value:n,label:t,attributes:r,default:i}}))}(t);return function(e){const n=(0,a.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const i=(0,o.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})}),[s,i])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,s=h(e),[o,c]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[a,d]=m({queryString:t,groupId:i}),[f,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,s]=(0,u.Dv)(t);return[i,(0,r.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:i}),x=(()=>{const e=a??f;return p({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{x&&c(x)}),[x]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),g(e)}),[d,g,s]),tabValues:s}}var g=t(9136);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function y(e){let{className:n,block:t,selectedValue:r,selectValue:o,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:a}=(0,s.a_)(),u=e=>{const n=e.currentTarget,t=c.indexOf(n),i=l[t].value;i!==r&&(a(n),o(i))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{c.push(e)},onKeyDown:d,onClick:u,...s,className:(0,i.A)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:s}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function v(e){const n=f(e);return(0,b.jsxs)("div",{className:(0,i.A)("tabs-container",x.tabList),children:[(0,b.jsx)(y,{...n,...e}),(0,b.jsx)(j,{...n,...e})]})}function w(e){const n=(0,g.A)();return(0,b.jsx)(v,{...e,children:d(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var r=t(96540);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);