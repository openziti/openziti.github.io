"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[19470],{74999:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>r});var i=t(74848),l=t(28453);const r=[];function s(e){const n={a:"a",code:"code",li:"li",p:"p",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enrollToCertEnabled"})," - Allows clients with valid JWTs to request a certificate from the controller by providing a\n",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Certificate_signing_request",children:"Certificate Signing Request (CSR)"}),". The resulting certificate will be used for authentication. The target ",(0,i.jsx)(n.code,{children:"enrollAuthPolicyId"})," must be set\nto a policy that allows certificate authentication. If ",(0,i.jsx)(n.code,{children:"enrollAuthPolicyId"})," is not set, the default policy\nwill be used and must allow certificate authentication."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enrollToTokenEnabled"}),"- Allows clients with valid JWTs to continue to use JWTs for authentication. The target\npolicy must be set to a policy that allows External JWT Signer authentication. If ",(0,i.jsx)(n.code,{children:"enrollAuthPolicyId"})," is not\nset, the default policy will be used and must allow External JWT Signer authentication."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Additionally, there are optional values that can be used to control which claims within the JWT are significant:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enrollAttributeClaimsSelector"})," - a root level property name (e.g. ",(0,i.jsx)(n.code,{children:"claims"}),") or a JSON pointer (e.g. ",(0,i.jsx)(n.code,{children:"/claims"}),") that\npoints to a string or array of strings that will be used to populate the ",(0,i.jsx)(n.code,{children:"attributes"})," field of the enrolling\nidentity. Defaults to no value set and identities will enroll without attributes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enrollAuthPolicyId"})," - the id of the authentication policy to use for the enrolling identity. Defaults to no value set\nand the identity will enroll with the default authentication policy."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enrollNameClaimsSelector"})," - the root level property name (e.g. ",(0,i.jsx)(n.code,{children:"claims"}),") or a JSON pointer (e.g. ",(0,i.jsx)(n.code,{children:"/claims"}),") that\npoints to a string that will be used to populate the ",(0,i.jsx)(n.code,{children:"name"})," field of the enrolling identity.\nDefaults to the subject property of the JWT (e.g. ",(0,i.jsx)(n.code,{children:"/sub"}),")"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}},38636:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"learn/core-concepts/security/enrollment","title":"Enrollment","description":"Enrollment is the process of some Edge client or edge router associating itself with a Ziti network. Client enrollment","source":"@site/docs/learn/core-concepts/security/enrollment.mdx","sourceDirName":"learn/core-concepts/security","slug":"/learn/core-concepts/security/enrollment","permalink":"/docs/openziti/learn/core-concepts/security/enrollment","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Connection Security","permalink":"/docs/openziti/learn/core-concepts/security/connection-security"},"next":{"title":"Session Types","permalink":"/docs/openziti/learn/core-concepts/security/sessions"}}');var l=t(74848),r=t(28453),s=t(74999);const o={},a="Enrollment",c={},d=[{value:"Routers",id:"routers",level:2},{value:"Router Enrollment Extension",id:"router-enrollment-extension",level:3},{value:"Clients",id:"clients",level:2},{value:"OTT Enrollment",id:"ott-enrollment",level:3},{value:"Create",id:"create",level:4},{value:"Ziti CLI",id:"ziti-cli",level:5},{value:"Edge Management API",id:"edge-management-api",level:4},{value:"Read",id:"read",level:3},{value:"Ziti CLI",id:"ziti-cli-1",level:4},{value:"Edge Management API",id:"edge-management-api-1",level:4},{value:"OTT CA Enrollment",id:"ott-ca-enrollment",level:3},{value:"Create",id:"create-1",level:4},{value:"Edge Management API",id:"edge-management-api-2",level:5},{value:"Auto CA Enrollment",id:"auto-ca-enrollment",level:3},{value:"Auto External JWT Signer Enrollment",id:"auto-external-jwt-signer-enrollment",level:3},...s.RM,{value:"Identity Uniqueness",id:"identity-uniqueness",level:4},{value:"Enrollment Process",id:"enrollment-process",level:4},{value:"Enrollment Token Submission",id:"enrollment-token-submission",level:4},{value:"Certificate Enrollment",id:"certificate-enrollment",level:5},{value:"Token Enrollment",id:"token-enrollment",level:5},{value:"Client Re-Enrollment",id:"client-re-enrollment",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"enrollment",children:"Enrollment"})}),"\n",(0,l.jsx)(n.p,{children:"Enrollment is the process of some Edge client or edge router associating itself with a Ziti network. Client enrollment\nresults in the creation of an identity or associating security credentials with a pre-provisioned identity.\nZiti Router enrollment is exclusively associating security credentials with a pre-provisioned Edge Router."}),"\n",(0,l.jsx)(n.p,{children:"Edge clients \"learn\" the controller's address and port when they enroll, so it is necessary to re-enroll or replace the identity if the controller's advertised address or port changes."}),"\n",(0,l.jsx)(n.h2,{id:"routers",children:"Routers"}),"\n",(0,l.jsxs)(n.p,{children:["Upon creation of an Edge Router, enrollment details in the form of a JWT that acts as a one-time-token become\navailable in the ",(0,l.jsx)(n.code,{children:"enrollmentJWT"})," field."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Create:"}),"\n",(0,l.jsx)(n.code,{children:"POST /edge/management/v1/edge-routers"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'{\n  "name": "test3"\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Get:"}),"\n",(0,l.jsx)(n.code,{children:"GET /edge/management/v1/edge-routers/PYvobLGzj"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'{\n    "data": {\n        ...,\n        "name": "test3",\n        "enrollmentJwt": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbSI6ImVyb3R0IiwiZXhwIjoxNjYwMDU4ODU5LCJpc3MiOiJodHRwczovLzEyNy4wLjAuMToxMjgwIiwianRpIjoiYjkzZjg2NTgtZGQ3ZC00NTc4LWJkYTYtMmZhZWNlZjkyMTc3Iiwic3ViIjoiUFl2b2JMR3pqIn0.UN6QiifUfCMUvzsKwjSUarl9iWyOr1zsaa_6VzNTRn7EQ_PjtHFMm9QEjj8ErtkNIbyh-vaVLZL-TPOAIZsaQX2Ye5k8-M7dbWGiQ35DbgQaJSWLMJ0xzazHYBvhZvZ9Wc5F96HKA_qTGiSq5Lsm3WraAffepEqCe_F_HwBwjBPrsgO9U23pKuoz1X8pQbAj95yoz6rBNWo63mlZDeDn7McEiJLY0i7EyPQ3paEjJ0sSntVjfmZ7aPgThoG2HCYbhvj_DkXD_HRSwMxoQHR1yIA4sW4ukdQ_S3nVMurLOG06d0VSUzlIecQSuJT8XV56AhqZ-ZNIEzp-bp2YaL1FlA",\n        "enrollmentToken": "b93f8658-dd7d-4578-bda6-2faecef92177",\n        ...\n        "isVerified": false,\n        ...\n    },\n    "meta": {}\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["To enroll a router, deliver the ",(0,l.jsx)(n.code,{children:"enrollmentJWT"})," to the host that will run the edge router and perform enrollment via:"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"ziti router enroll -j <jwt_path>"})}),"\n",(0,l.jsx)(n.h3,{id:"router-enrollment-extension",children:"Router Enrollment Extension"}),"\n",(0,l.jsx)(n.p,{children:"Routers will automatically maintain their enrollment by refreshing their certificates seven days before they expire."}),"\n",(0,l.jsx)(n.h2,{id:"clients",children:"Clients"}),"\n",(0,l.jsx)(n.p,{children:"Clients enroll in one of two major categories:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["pre-provisioned - identities are created before the client attempts to run and are provided with one-time-tokens to enroll","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"OTT, OTT CA"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["post-provisioned - an identity is created during enrollment","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Auto CA"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"ott-enrollment",children:"OTT Enrollment"}),"\n",(0,l.jsx)(n.p,{children:"OTT Enrollment involves creating an identity and then delivering the enrollment JWT to client software that can then\ncomplete enrollment."}),"\n",(0,l.jsx)(n.h4,{id:"create",children:"Create"}),"\n",(0,l.jsx)(n.h5,{id:"ziti-cli",children:"Ziti CLI"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"ziti edge create identity [device|service|user] test-user10 -j ./my.token.jwt"})}),"\n",(0,l.jsx)(n.h4,{id:"edge-management-api",children:"Edge Management API"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"POST /edge/management/v1/identities"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'{\n  "name": "test-user10",\n  "type": "User",\n  "isAdmin": false,\n  "roleAttributes": [\n    "dial"\n  ],\n  "enrollment": {\n    "ott": true\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"read",children:"Read"}),"\n",(0,l.jsx)(n.h4,{id:"ziti-cli-1",children:"Ziti CLI"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"ziti edge list identities 'id=\"-ItUkLGKUE\"'"})}),"\n",(0,l.jsx)(n.h4,{id:"edge-management-api-1",children:"Edge Management API"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"GET /edge/management/v1/identities/-ItUkLGKUE"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'{\n    "data": {\n        ...\n        "id": "-ItUkLGKUE",\n        "tags": {},\n       ...\n        "enrollment": {\n            "ott": {\n                "expiresAt": "2022-08-09T15:37:16.619Z",\n                "id": "uFtU28GKj",\n                "jwt": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbSI6Im90dCIsImV4cCI6MTY2MDA1OTQzNiwiaXNzIjoiaHR0cHM6Ly8xMjcuMC4wLjE6MTI4MCIsImp0aSI6IjdjM2VmOWFkLTE2ZjAtNDk4OS05MDQ3LTNmYzFmYTE5NDgyYyIsInN1YiI6Ii1JdFVrTEdLVUUifQ.JnLlHP9wdMlfgteAf4Y-KMnxRv_00EOhEtRRmMABg_dD7xRK2RQt-bwt5rkosfgghZPR4jppuR9Prg1F1skf7JGa9Z-CmEIVvmHB8LAT6AvNnRmfkNBioD4g-Q0LP1o_xZyfePUslSxwNYPevzYYdCwgXK-TuIW34sCirX1edZ25eRtlnTUq9T0cgqMyVCEtX03WkAhb8C_TLIzhWxCwxxJTY3lgOqwuMXQEqLrWFiuG6Q1aIAA8hjh57043z5a1GQ8sUGIWP0U7YuXBWzl50VY4fenrstaaanweQLDPCZlZGPKh08mPCAGAc4Fun10hBzYaezJXGb8BpEPKXrtmLA",\n                "token": "7c3ef9ad-16f0-4989-9047-3fc1fa19482c"\n            }\n        },\n        ...\n    },\n    "meta": {}\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Alternatively, enrollments for an identity can be reviewed at ",(0,l.jsx)(n.code,{children:"/edge/management/v1/identities/<id>/enrollments"})," or\n",(0,l.jsx)(n.code,{children:"/edge/management/v1/enrollments"})," or ",(0,l.jsx)(n.code,{children:"ziti edge list enrollments"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"ott-ca-enrollment",children:"OTT CA Enrollment"}),"\n",(0,l.jsxs)(n.p,{children:["OTT CA Enrollment requires that the enrolling client also has an existing client certificate signed by a\n",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas",children:"3rd Party CA"}),". When creating an identity the ",(0,l.jsx)(n.code,{children:"id"})," of the target\n",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas",children:"3rd Party CA"})," is specified."]}),"\n",(0,l.jsx)(n.h4,{id:"create-1",children:"Create"}),"\n",(0,l.jsx)(n.h5,{id:"edge-management-api-2",children:"Edge Management API"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"POST /edge/management/v1/identities"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'{\n  "name": "test-user10",\n  "type": "User",\n  "isAdmin": false,\n  "roleAttributes": [\n    "dial"\n  ],\n  "enrollment": {\n    "ottca": "<ott-ca-id>"\n  }\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["An enrollment JWT can be retrieved in the same manner as ",(0,l.jsx)(n.a,{href:"#ott-enrollment",children:"OTT Enrollment"})]}),"\n",(0,l.jsx)(n.h3,{id:"auto-ca-enrollment",children:"Auto CA Enrollment"}),"\n",(0,l.jsxs)(n.p,{children:["Auto CA enrollment allows a ",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas",children:"3rd Party CA"})," to have clients enroll with a\nZiti network without first creating an identity or distributing a JWT enrollment token. Create a\n",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas",children:"3rd Party CA"})," and ensure that ",(0,l.jsx)(n.code,{children:"isAutoCaEnrollmentEnabled"})," is set to ",(0,l.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:["The name of enrolling clients is controlled by the ",(0,l.jsx)(n.code,{children:"identityNameFormat"})," of the ",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas",children:"3rd Party CA"}),".\nThe /format supports a number of replacement strings:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[caName]"})," - the Ziti ",(0,l.jsx)(n.code,{children:"name"})," of the ",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas",children:"3rd Party CA"})," that validates the enrolling certificate"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[caId]"})," - the Ziti ",(0,l.jsx)(n.code,{children:"id"})," of the ",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas",children:"3rd Party CA"})," that validates the enrolling certificate"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[commonName]"})," - the common name of the enrolling certificate"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[requestedName]"})," - clients can submit a requested name during enrollment"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[identityId]"})," - the ",(0,l.jsx)(n.code,{children:"id"})," of the created identity"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["The default format is ",(0,l.jsx)(n.code,{children:"[caName] - [commonName]"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"Identity names are unique, and if a collision occurs, incrementing numbers are appended."}),"\n",(0,l.jsx)(n.h3,{id:"auto-external-jwt-signer-enrollment",children:"Auto External JWT Signer Enrollment"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/external-jwt-signers",children:"External JWT Signers"})," represent an external IdP that can sign JWTs\nas proof of identity (including OAuth/OIDC servers). Auto Ext-JWT-Signer enrollment allows a client with a JWT from a\nconfigured ",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/external-jwt-signers",children:"External JWT Signers"})," to enroll without an administrator\npreconfiguring an identity for them."]}),"\n",(0,l.jsx)(n.p,{children:"For this to function, the following must be true:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"the External JWT Signer is configured to validate incoming JWTs"}),"\n",(0,l.jsx)(n.li,{children:"the External JWT Signer is enabled"}),"\n",(0,l.jsxs)(n.li,{children:["the External JWT Signer has a ",(0,l.jsx)(n.code,{children:"claimsProperty"})," set that maps to an id value to use as ",(0,l.jsx)(n.code,{children:"externalId"})," of enrolling\nidentities."]}),"\n",(0,l.jsxs)(n.li,{children:["either the ",(0,l.jsx)(n.code,{children:"enrollToCertEnable"})," or ",(0,l.jsx)(n.code,{children:"enrollToTokenEnabled"})," are set to ",(0,l.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/external-jwt-signers",children:"External JWT Signers"})," options ",(0,l.jsx)(n.code,{children:"enrollToCertEnable"})," and\n",(0,l.jsx)(n.code,{children:"enrollToTokenEnabled"})," are defined as follows:"]}),"\n",(0,l.jsx)(s.Ay,{}),"\n",(0,l.jsxs)(n.p,{children:["These values are included on the OpenZiti CLI command ",(0,l.jsx)(n.code,{children:"ziti edge create ext-jwt-signer"}),"."]}),"\n",(0,l.jsx)(n.h4,{id:"identity-uniqueness",children:"Identity Uniqueness"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"claimsProperty"})," that selects the external id of the enrolling identity must be unique. Attempting to enroll\nwith further duplicate external ids will result in an error. If desired, remove the previously enrolled identity\nto allow re-enrollment."]}),"\n",(0,l.jsx)(n.h4,{id:"enrollment-process",children:"Enrollment Process"}),"\n",(0,l.jsx)(n.p,{children:"In order for Auto External JWT Signer Enrollment to happen, a client must be used that implements the enrollment flow.\nThis process is similar to External JWT Signer authentication (e.g. OIDC or OAuth)."}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The client queries the public External JWT Signers list on the Client API"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"GET /edge/client/v1/external-jwt-signers\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'200 OK\nContent-Type: application/json\n\n{\n    meta: {...},\n    data: [\n        {\n            id: "20jgir0ji02",\n              "name": "Example 1",\n              "externalAuthUrl": "https://auth.example.com/login",\n              "clientId": "native",\n              "scopes": "openid profile email",\n              "openIdConfigurationUrl": "https://auth.example.com/.well-known/openid-configuration",\n              "audience": "myAudience",\n              "targetToken": "ACCESS",\n              "enrollToCertEnabled": true,\n              "enrollToTokenEnabled": false,\n        },\n        ...\n    ]\n}\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The client presents a list to be selected from or selects a specific one."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The client follows the authentication flow, enabling user input where necessary."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The client receives a JWT from the external IdP."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The client uses the JWT for enrollment. (see below)"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"enrollment-token-submission",children:"Enrollment Token Submission"}),"\n",(0,l.jsxs)(n.p,{children:["The client can submit the JWT to the controller for enrollment that results in either certificate-based authentication\n(",(0,l.jsx)(n.code,{children:"enrollToCert"})," is true) or token-based authentication (",(0,l.jsx)(n.code,{children:"enrollToToken"})," is true)."]}),"\n",(0,l.jsx)(n.h5,{id:"certificate-enrollment",children:"Certificate Enrollment"}),"\n",(0,l.jsxs)(n.p,{children:["Certificate enrollment requires the creation of a ",(0,l.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Certificate_signing_request",children:"Certificate Signing Request (CSR)"}),". The CSR can contain any values desired. However, they will\nbe ignored by the controller. The only requirement is that a properly configured key set was used to create and sign\nthe CSR."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"POST /edge/client/v1/enroll/token\nAuthorization: Bearer <jwt from IdP>\n\n<CSR>\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'200 OK\nContent-Type: application/json\n\n{\n    "meta":{},\n    "data":{}\n}\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'200 OK\nContent-Type: application/json\n\n{\n    "meta": {...},\n    "data": {\n        "cert": "<PEM encoded certificate chain>",\n        "ca": "<PEM encoded CA certificate bundle>"\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h5,{id:"token-enrollment",children:"Token Enrollment"}),"\n",(0,l.jsx)(n.p,{children:"Token enrollment is a simple request to the controller with the JWT."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"POST /edge/client/v1/enroll/token\nAuthorization: Bearer <jwt from IdP>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"client-re-enrollment",children:"Client Re-Enrollment"}),"\n",(0,l.jsxs)(n.p,{children:["Clients may request to extend enrollments that generated x509 certificates if the client certificate was issued by\nZiti. If the client's certificate was issued by a ",(0,l.jsx)(n.a,{href:"/docs/openziti/learn/core-concepts/security/authentication/third-party-cas",children:"3rd Party CA"}),", the\nclient certificate renewal must be handled outside of Ziti."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(96540);const l={},r=i.createContext(l);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);