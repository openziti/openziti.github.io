"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[50553],{8767:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>n,metadata:()=>r,toc:()=>l});var r=s(65351),t=s(74848),i=s(28453);const n={title:"zrok Permission Modes",date:new Date("2024-03-28T15:38:17.000Z"),cuid:"clubeftvl000208jtghim4481",slug:"zrok-permission-modes",authors:["MichaelQuigley"],image:"@site/blogs/openziti/v1710955657342/eeab3265-3689-45b5-983b-83b06ee7fdb7.png",imageDark:"@site/blogs/openziti/v1710955657342/eeab3265-3689-45b5-983b-83b06ee7fdb7.png",tags:["security","networking","permissions","access-control","zrok"]},a=void 0,c={authorsImageUrls:[void 0]},l=[];function d(e){const o={a:"a",code:"code",em:"em",p:"p",pre:"pre",...(0,i.R)(),...e.components},{LiteYouTubeEmbed:s}=o;return s||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("LiteYouTubeEmbed",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.p,{children:"zrok is a powerful platform for sharing. The latest releases of zrok allow you to get granular about which other\nzrok accounts are allowed to privately access your shares."}),"\n",(0,t.jsxs)(o.p,{children:["In all current zrok versions, the ",(0,t.jsx)(o.code,{children:"zrok share private"}),' command will allocate an ephemeral share. The allocated share is accessible by any user on that zrok service instance (zrok.io, for example) as long as they know the share token. This model is now referred to as the "open permission mode". This will remain the default behavior for a while still (probably until the ',(0,t.jsx)(o.code,{children:"v0.5"})," release of zrok)."]}),"\n",(0,t.jsxs)(o.p,{children:["As of ",(0,t.jsx)(o.code,{children:"v0.4.26"}),", zrok provides a ",(0,t.jsx)(o.code,{children:"--closed"})," option to the ",(0,t.jsx)(o.code,{children:"zrok share"})," (and ",(0,t.jsx)(o.code,{children:"zrok reserve"}),') commands, which by default restricts access to the share to only environments owned by the zrok account that created the share. We call this the "closed permission mode".']}),"\n",(0,t.jsxs)(o.p,{children:["Along with ",(0,t.jsx)(o.code,{children:"--closed"}),", the ",(0,t.jsx)(o.code,{children:"zrok share"})," and ",(0,t.jsx)(o.code,{children:"zrok reserve"})," commands include a ",(0,t.jsx)(o.code,{children:"--access-grant"})," option, which allows you to specify which additional zrok accounts are allowed to access the share. For example:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-plaintext",children:"# allocate a closed, private, ephemeral share\n$ zrok share private --closed --backend-mode web /home/public_html\n\n# allocate a closed, private, reserved share\n$ zrok reserve --closed --backend-mode web --unique-name public \\\n    /home/public_html\n\n# allocate a closed, private, ephemeral share granting access to \n# additional users\n\n$ zrok share private --closed --access-grant user@somewhere.com \\\n    --access-grant anotheruser@somewhereelse.com --backend-mode web \\\n    /home/public_html\n"})}),"\n",(0,t.jsxs)(o.p,{children:["The closed permission mode allows you to control which users are allowed to access your shares using ",(0,t.jsx)(o.code,{children:"zrok access private"}),". This applies to both public and private shares. When you create a public share, it is ",(0,t.jsx)(o.em,{children:"also"})," a private share and can be accessed using ",(0,t.jsx)(o.code,{children:"zrok access private"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:["If you happen to create a share (ephemeral or reserved) and you need to either add or remove users to the grant list, you can use the new ",(0,t.jsx)(o.code,{children:"zrok modify share"})," command:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-plaintext",children:"# add additional users to a share\n$ zrok modify share --add-access-grant user2@zrok.io \\\n    --add-access-grant user3@zrok.io \\\n    4qzdf22h67qn\n\n# remove a user from a share\n$ zrok modify share --remove-access-grant user@somewhere.com \\\n    4qzdf22h67qn\n"})}),"\n",(0,t.jsxs)(o.p,{children:["Keep in mind that for now, ",(0,t.jsx)(o.code,{children:"--remove-access-grant"})," does not ",(0,t.jsx)(o.em,{children:"terminate"})," any established ",(0,t.jsx)(o.code,{children:"zrok access private"})," listeners, it just prevents the user from creating new listeners. This behavior will be updated in a future release."]}),"\n",(0,t.jsxs)(o.p,{children:["If you'd like to see a video tour of these features, I did a ",(0,t.jsx)(o.a,{href:"https://www.youtube.com/playlist?list=PLMUj_5fklasLuM6XiCNqwAFBuZD1t2lO2",children:"zrok Office Hours"})," video on it a few weeks ago:"]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(s,{id:"xQ2uHxuaAb0",title:"YouTube video"})}),"\n",(0,t.jsxs)(o.p,{children:["This is just a preview of the permission mode functionality to come. You might notice that there isn't currently a way to ",(0,t.jsx)(o.em,{children:"list"})," the access grants on a share. We wanted to get the basic closed permission mode out in the wild as quickly as possible, and improving the user experience around share metadata (including the access grants) is a little bit of a bigger job. It's coming. We suspect that simply adding ",(0,t.jsx)(o.code,{children:"--closed"})," to a ",(0,t.jsx)(o.code,{children:"zrok share"})," or ",(0,t.jsx)(o.code,{children:"zrok reserve"})," command is probably what most users are looking for.now"]}),"\n",(0,t.jsxs)(o.p,{children:["If you run into any issues or need assistance, feel free to reach out on the the ",(0,t.jsx)(o.a,{href:"https://openziti.discourse.group/c/zrok/24",children:"OpenZiti Discourse"}),". There's a great community there to help you."]}),"\n",(0,t.jsxs)(o.p,{children:["It always means a lot to the folks working on zrok when you're take a minute to drop a star on the ",(0,t.jsx)(o.a,{href:"https://github.com/openziti/zrok",children:"zrok's GitHub repository"}),". It helps us to know that the work we're doing on zrok is important to you."]})]})}function h(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,o,s)=>{s.d(o,{R:()=>n,x:()=>a});var r=s(96540);const t={},i=r.createContext(t);function n(e){const o=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:n(e.components),r.createElement(i.Provider,{value:o},e.children)}},65351:e=>{e.exports=JSON.parse('{"permalink":"/docs/openziti/blog/zrok-permission-modes","source":"@site/blog/zrok-permission-modes.md","title":"zrok Permission Modes","description":"zrok is a powerful platform for sharing. The latest releases of zrok allow you to get granular about which other","date":"2024-03-28T15:38:17.000Z","tags":[{"inline":false,"label":"Security","permalink":"/docs/openziti/blog/tags/security","description":"Security-related posts"},{"inline":false,"label":"Networking","permalink":"/docs/openziti/blog/tags/networking","description":"Networking related posts"},{"inline":false,"label":"Permissions","permalink":"/docs/openziti/blog/tags/permissions","description":"Permission management"},{"inline":false,"label":"Access Control","permalink":"/docs/openziti/blog/tags/access-control","description":"Access control"},{"inline":false,"label":"zrok","permalink":"/docs/openziti/blog/tags/zrok","description":"zrok related content"}],"readingTime":2.95,"hasTruncateMarker":true,"authors":[{"name":"Michael Quigley","title":"Author","url":"https://github.com/michaelquigley","imageURL":"https://avatars.githubusercontent.com/michaelquigley","key":"MichaelQuigley","page":null}],"frontMatter":{"title":"zrok Permission Modes","date":"2024-03-28T15:38:17.000Z","cuid":"clubeftvl000208jtghim4481","slug":"zrok-permission-modes","authors":["MichaelQuigley"],"image":"@site/blogs/openziti/v1710955657342/eeab3265-3689-45b5-983b-83b06ee7fdb7.png","imageDark":"@site/blogs/openziti/v1710955657342/eeab3265-3689-45b5-983b-83b06ee7fdb7.png","tags":["security","networking","permissions","access-control","zrok"]},"unlisted":false,"prevItem":{"title":"Secure Remote Development with zrok and JetBrains","permalink":"/docs/openziti/blog/secure-remote-development-with-zrok-and-jetbrains"},"nextItem":{"title":"The zrok SOCKS Backend","permalink":"/docs/openziti/blog/the-zrok-socks-backend"}}')}}]);