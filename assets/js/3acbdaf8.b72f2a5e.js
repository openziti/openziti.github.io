"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[50815],{84404:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"reference/ha/bootstrapping/configuration","title":"Controller Configuration","description":"Config File","source":"@site/docs/reference/ha/bootstrapping/configuration.md","sourceDirName":"reference/ha/bootstrapping","slug":"/reference/ha/bootstrapping/configuration","permalink":"/docs/openziti/reference/ha/bootstrapping/configuration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"sidebar_label":"Configuration","sidebar_position":30},"sidebar":"docsSidebar","previous":{"title":"Certificates","permalink":"/docs/openziti/reference/ha/bootstrapping/certificates"},"next":{"title":"Initialization","permalink":"/docs/openziti/reference/ha/bootstrapping/initialization"}}');var o=i(74848),r=i(28453);const s={sidebar_label:"Configuration",sidebar_position:30},a="Controller Configuration",c={},l=[{value:"Config File",id:"config-file",level:3}];function d(e){const n={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"controller-configuration",children:"Controller Configuration"})}),"\n",(0,o.jsx)(n.h3,{id:"config-file",children:"Config File"}),"\n",(0,o.jsxs)(n.p,{children:["The controller requires a ",(0,o.jsx)(n.code,{children:"cluster"})," section."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"cluster:\n  dataDir: /path/to/data/dir\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"dataDir"})," will be used to store the following:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ctrl-ha.db"})," - the OpenZiti data model bbolt database"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"raft.db"})," - the Raft bbolt database"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"snapshots/"})," - a directory to store Raft snapshots"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Controllers use the control channel listener to communicate with each other. Unlike\nrouters, they need to know how to reach each other, so an advertise address must\nbe configured."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"ctrl:\n  listener: tls:0.0.0.0:1280\n  options:\n    advertiseAddress: tls:ctrl1.ziti.example.com:1280\n"})}),"\n",(0,o.jsx)(n.p,{children:"Finally, cluster-capable SDK clients use OIDC for authentication, so an OIDC endpoint must be configured."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"web:\n  - name: all-apis-localhost\n    bindPoints:\n      - interface: 0.0.0.0:1280\n        address: ctrl1.ziti.example.com:1280\n    options:\n      minTLSVersion: TLS1.2\n      maxTLSVersion: TLS1.3\n    apis:\n      - binding: health-checks\n      - binding: fabric\n      - binding: edge-management\n      - binding: edge-client\n      - binding: edge-oidc\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var t=i(96540);const o={},r=t.createContext(o);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);