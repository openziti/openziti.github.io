"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[3845],{43286:(e,t,i)=>{i.d(t,{Ay:()=>d,RM:()=>o});var n=i(74848),r=i(28453);const o=[{value:"For Tunnelers",id:"for-tunnelers",level:4},{value:"For BrowZer",id:"for-browzer",level:4},{value:"For Ziti Admin Console (ZAC)",id:"for-ziti-admin-console-zac",level:4}];function s(e){const t={a:"a",code:"code",h4:"h4",p:"p",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.a,{href:"https://oauth.net/2/pkce/",children:"Authorization Code Flow with PKCE or PKCE flow"})," requires configuring callback URLs the\r\nIdentity Provider (IdP) will allow redirecting to. If the URL for a specific client is not specifically listed, the IdP\r\nwill deny the authentication request. Depending on the technology used to authenticate to the OpenZiti Network,\r\ndifferent URLs need to be specified. More than one URL is allowed to be configured. Decide if you are configuring the\r\nIdP for use with tunnelers, with BrowZer or with both and add the appropriate callback urls."]}),"\n",(0,n.jsx)(t.p,{children:'In the Auth0 dashboard, with the application selected, choose the "Settings" tab and scroll down to the "Application\r\nURIs" section and add the URLs.'}),"\n",(0,n.jsx)(t.h4,{id:"for-tunnelers",children:"For Tunnelers"}),"\n",(0,n.jsxs)(t.p,{children:["Tunnelers require an allowed callback URL of: ",(0,n.jsx)(t.code,{children:"http://localhost:20314/auth/callback"}),"."]}),"\n",(0,n.jsx)(t.h4,{id:"for-browzer",children:"For BrowZer"}),"\n",(0,n.jsxs)(t.p,{children:["The URL to configure for BrowZer will vary depending on the BrowZer configuration. BrowZer requires a wildcard\r\ncertificate in order to be deployed and all services are delivered from this wildcard domain. You will need to add\r\nthe configured ",(0,n.jsx)(t.a,{href:"/docs/learn/quickstarts/browzer/example/#get-a-wildcard-certificate",children:"wildcard domain"})," as the\r\ncallback url."]}),"\n",(0,n.jsx)(t.h4,{id:"for-ziti-admin-console-zac",children:"For Ziti Admin Console (ZAC)"}),"\n",(0,n.jsxs)(t.p,{children:["The URL to configure an IdP for so that ZAC will be able to authenticate will depend on how you deploy your ZAC. The\r\ncurrent method recommended to deploy ZAC will deploy it on the same URL as the controller. For example:\r\n",(0,n.jsx)(t.a,{href:"https://controller.example.com/zac/callback",children:"https://controller.example.com/zac/callback"})]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(s,{...e})}):s(e)}},47122:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>d,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"guides/external-auth/identity-providers/authentik","title":"Authentik","description":"This section illustrates where the expected values are found within","source":"@site/docs/guides/external-auth/identity-providers/authentik.mdx","sourceDirName":"guides/external-auth/identity-providers","slug":"/guides/external-auth/identity-providers/authentik","permalink":"/docs/guides/external-auth/identity-providers/authentik","draft":false,"unlisted":false,"editUrl":"https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/guides/external-auth/identity-providers/authentik.mdx","tags":[],"version":"current","lastUpdatedAt":1743027383000,"frontMatter":{"title":"Authentik","sidebar_label":"Authentik","hide_table_of_contents":true},"sidebar":"docsSidebar","previous":{"title":"Authelia","permalink":"/docs/guides/external-auth/identity-providers/authelia"},"next":{"title":"Cognito","permalink":"/docs/guides/external-auth/identity-providers/cognito"}}');var r=i(74848),o=i(28453),s=i(43286);const d={title:"Authentik",sidebar_label:"Authentik",hide_table_of_contents:!0},a="Authentik",l={},h=[{value:"Create an Application with Provider",id:"create-an-application-with-provider",level:2},{value:"Configure the Application",id:"configure-the-application",level:2},{value:"Choose a Provider",id:"choose-a-provider",level:2},{value:"Configure the Provider",id:"configure-the-provider",level:2},{value:"Callback URLs",id:"callback-urls",level:3},...s.RM];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"authentik",children:"Authentik"})}),"\n",(0,r.jsx)("img",{src:"/icons/logo-authentik.svg",alt:"HAuthentik logo",height:"100px"}),"\n",(0,r.jsxs)(t.p,{children:["This section illustrates where the expected values are found within\n",(0,r.jsx)(t.a,{href:"https://docs.goauthentik.io/docs/",children:"the Authentik config"}),". For a more detailed guide on enabling Authentik with\nOpenZiti, see below. Use these values to configure an external JWT signer. All of these values are found from the\nAuthentik ",(0,r.jsx)(t.strong,{children:"Admin interface"})," in the corresponding provider's overview page."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Field"}),(0,r.jsx)(t.th,{children:"Where to Find the Value in the Authentik UI"}),(0,r.jsx)(t.th,{children:"Example"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Issuer"})}),(0,r.jsxs)(t.td,{children:["Shown on the right as the ",(0,r.jsx)(t.strong,{children:"OpenID Configuration Issuer"})]}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://authentik.doc.demo.openziti.org:9243/application/o/openziti-api/",children:"https://authentik.doc.demo.openziti.org:9243/application/o/openziti-api/"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Client ID"})}),(0,r.jsxs)(t.td,{children:["Shown in the left column as the ",(0,r.jsx)(t.strong,{children:"Client ID"})]}),(0,r.jsx)(t.td,{children:"authentik_openziti"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Audience"})}),(0,r.jsxs)(t.td,{children:["Unless overridden, the same value as the ",(0,r.jsx)(t.strong,{children:"Client ID"})]}),(0,r.jsx)(t.td,{children:"authentik_openziti"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"External Auth URL"})}),(0,r.jsxs)(t.td,{children:["The same value as the ",(0,r.jsx)(t.strong,{children:"Issuer"})]}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://authentik.doc.demo.openziti.org:9243/application/o/openziti-api/",children:"https://authentik.doc.demo.openziti.org:9243/application/o/openziti-api/"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"JWKS Endpoint"})}),(0,r.jsxs)(t.td,{children:["Shown on the right as the ",(0,r.jsx)(t.strong,{children:"JWKS URL"})]}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://authentik.doc.demo.openziti.org:9243/application/o/openziti-api/jwks/",children:"https://authentik.doc.demo.openziti.org:9243/application/o/openziti-api/jwks/"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Claims Property"})}),(0,r.jsxs)(t.td,{children:["Often ",(0,r.jsx)(t.code,{children:"email"}),", but can also be ",(0,r.jsx)(t.code,{children:"sub"})," or any other claim contained in the JWT"]}),(0,r.jsx)(t.td,{children:"email"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Scopes"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"openid"})," is always included. Often 'email' but 'profile' or any standard or custom scope"]}),(0,r.jsx)(t.td,{children:"email offline_access"})]})]})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"create-an-application-with-provider",children:"Create an Application with Provider"}),"\n",(0,r.jsxs)(t.p,{children:["Begin by creating an application with provider. Go to the admin interface, on the left expand ",(0,r.jsx)(t.strong,{children:"Applications"}),", click\non ",(0,r.jsx)(t.strong,{children:"Applications"})," and then click on ",(0,r.jsx)(t.strong,{children:"Create with Provider"})," and complete the wizard that pops up."]}),"\n",(0,r.jsx)(t.admonition,{title:"Create Application",type:"info",children:(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"create app with provider",src:i(97395).A+"",width:"1270",height:"619"})})}),"\n",(0,r.jsx)(t.h2,{id:"configure-the-application",children:"Configure the Application"}),"\n",(0,r.jsxs)(t.p,{children:["Enter the ",(0,r.jsx)(t.strong,{children:"Name"})," of the application and click the ",(0,r.jsx)(t.strong,{children:"Next"})," button."]}),"\n",(0,r.jsx)(t.admonition,{title:"Configure the Application",type:"info",children:(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:i(53941).A+"",width:"1124",height:"755"})})}),"\n",(0,r.jsx)(t.h2,{id:"choose-a-provider",children:"Choose a Provider"}),"\n",(0,r.jsxs)(t.p,{children:["When choosing a provider, choose the ",(0,r.jsx)(t.strong,{children:"OAuth2/OpenID Provider"})," option and click the ",(0,r.jsx)(t.strong,{children:"Next"})," button."]}),"\n",(0,r.jsx)(t.admonition,{title:"Choose a Provider",type:"info",children:(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:i(51838).A+"",width:"1124",height:"752"})})}),"\n",(0,r.jsx)(t.h2,{id:"configure-the-provider",children:"Configure the Provider"}),"\n",(0,r.jsxs)(t.p,{children:["On the ",(0,r.jsx)(t.strong,{children:"Configure Provider"})," screen, enter a ",(0,r.jsx)(t.strong,{children:"Name"}),' for the provider (or leave it as the default). When choosing the\nauthorization flow, select "default-provider-authorization-explicit-consent (Authorize Application)". The ',(0,r.jsx)(t.strong,{children:"Client\ntype"})," should be set to ",(0,r.jsx)(t.strong,{children:"Public"}),". Allow for the ",(0,r.jsx)(t.strong,{children:"Client ID"})," to be automatically generated, or assign a meaningful\nname to the provider. Note that this will also become the ",(0,r.jsx)(t.code,{children:"aud"}),"ience used when configuring OpenZiti. Enter the expected\nredirect URLs. OpenZiti tunnelers expect to have ",(0,r.jsx)(t.code,{children:"http://localhost:20314/auth/callback"})," specified as a valid callback URL."]}),"\n",(0,r.jsx)(t.h3,{id:"callback-urls",children:"Callback URLs"}),"\n",(0,r.jsx)(s.Ay,{}),"\n",(0,r.jsx)(t.admonition,{title:"Configure the Provider",type:"info",children:(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:i(20679).A+"",width:"1122",height:"804"})})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},97395:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/create-app-provider-c793c132354eb4b4d11705b478212f1a.png"},53941:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/new-app-1-e09cc719be702ae7814b07979ba88770.png"},51838:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/new-app-2-943ae7c958706cfd0ddb0c8bd282fad3.png"},20679:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/new-app-3-1b1d34981b2cf0295b3c990fa310ed5e.png"},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>d});var n=i(96540);const r={},o=n.createContext(r);function s(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);