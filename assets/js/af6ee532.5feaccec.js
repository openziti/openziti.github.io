"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[4204],{38668:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>c});var n=i(72524),a=i(74848),r=i(28453);const o={title:"Fun with Adaptive Rate Limiting",date:new Date("2024-01-26T17:44:12.000Z"),cuid:"clruxmy03000408gr7rdb2mk3",slug:"fun-with-adaptive-rate-limiting",authors:["PaulLorenz"],image:"@site/blogs/openziti/v1706152812055/f1c7ece1-5bee-41f9-864a-1cabc710bb41.png",imageDark:"@site/blogs/openziti/v1706152812055/f1c7ece1-5bee-41f9-864a-1cabc710bb41.png",tags:["performance","golang","security","apis","openziti"]},s="Background",l={authorsImageUrls:[void 0]},c=[];function u(e){const t={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["We recently had an issue where an ",(0,a.jsx)(t.a,{href:"http://openziti.io",children:"OpenZiti network"})," was overwhelmed with client requests when a user change unintentionally caused the request rate to spike. The fundamental problem was that if a request took too long, the client gave up, but the request was still processed. The system ended up doing work that was ignored while causing new requests to wait until they also timed out. Once the requests hit a certain threshold the system didn't degrade gracefully."]}),"\n",(0,a.jsx)(t.p,{children:"I had a fun day solving the problem, and while I'm sure that nothing here is new, I thought others might be interested in where I landed and some ideas that were rejected along the way."})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>s});var n=i(96540);const a={},r=n.createContext(a);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(r.Provider,{value:t},e.children)}},72524:e=>{e.exports=JSON.parse('{"permalink":"/docs/openziti/blog/fun-with-adaptive-rate-limiting","source":"@site/blog/fun-with-adaptive-rate-limiting.md","title":"Fun with Adaptive Rate Limiting","description":"We recently had an issue where an OpenZiti network was overwhelmed with client requests when a user change unintentionally caused the request rate to spike. The fundamental problem was that if a request took too long, the client gave up, but the request was still processed. The system ended up doing work that was ignored while causing new requests to wait until they also timed out. Once the requests hit a certain threshold the system didn\'t degrade gracefully.","date":"2024-01-26T17:44:12.000Z","tags":[{"inline":false,"label":"Performance","permalink":"/docs/openziti/blog/tags/performance","description":"Performance optimization"},{"inline":false,"label":"golang","permalink":"/docs/openziti/blog/tags/golang","description":"Go/Golang content"},{"inline":false,"label":"Security","permalink":"/docs/openziti/blog/tags/security","description":"Security-related posts"},{"inline":false,"label":"APIs","permalink":"/docs/openziti/blog/tags/apis","description":"API development"},{"inline":false,"label":"OpenZiti","permalink":"/docs/openziti/blog/tags/openziti","description":"OpenZiti related content"}],"readingTime":8.1,"hasTruncateMarker":true,"authors":[{"name":"Paul Lorenz","title":"Author","url":"https://github.com/plorenz","imageURL":"https://avatars.githubusercontent.com/plorenz","key":"PaulLorenz","page":null}],"frontMatter":{"title":"Fun with Adaptive Rate Limiting","date":"2024-01-26T17:44:12.000Z","cuid":"clruxmy03000408gr7rdb2mk3","slug":"fun-with-adaptive-rate-limiting","authors":["PaulLorenz"],"image":"@site/blogs/openziti/v1706152812055/f1c7ece1-5bee-41f9-864a-1cabc710bb41.png","imageDark":"@site/blogs/openziti/v1706152812055/f1c7ece1-5bee-41f9-864a-1cabc710bb41.png","tags":["performance","golang","security","apis","openziti"]},"unlisted":false,"prevItem":{"title":"Securing a Dedicated  Palworld Server For My Family with zrok","permalink":"/docs/openziti/blog/securing-dedicated-palworld-server-with-zrok"},"nextItem":{"title":"The zrok Drives CLI Preview","permalink":"/docs/openziti/blog/the-zrok-drives-cli-preview"}}')}}]);