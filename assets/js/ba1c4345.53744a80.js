"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[44666],{73987:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var i=n(83164),a=n(74848),o=n(28453);const s={title:"Postman and the Management API",date:new Date("2023-03-02T15:08:04.000Z"),cuid:"cler8r24d000n09ichw8y48u8",slug:"postman-mgmt",authors:["KennethBingham"],image:"@site/blogs/openziti/v1677732038328/f6149856-e282-4451-b1a4-f278eff9f11b.png",imageDark:"@site/blogs/openziti/v1677732038328/f6149856-e282-4451-b1a4-f278eff9f11b.png",ogimage:"/blogs/openziti/v1677731728423/ba352516-83a5-48a8-a41b-e028c2dad45e.png",tags:["postman","swagger","rest-api","openapi","codegeneration"]},r=void 0,c={authorsImageUrls:[void 0]},l=[{value:"About the Management API",id:"about-the-management-api",level:2},{value:"What about the Client API?",id:"what-about-the-client-api",level:3},{value:"Generated Clients",id:"generated-clients",level:2},{value:"Get the OpenAPI 2.0 Specification",id:"get-the-openapi-20-specification",level:2},{value:"Import to Postman",id:"import-to-postman",level:2},{value:"Create a Postman Environment",id:"create-a-postman-environment",level:2},{value:"Customize the Authenticate Request",id:"customize-the-authenticate-request",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Postman can build a collection of API requests and has a friendly interface for walking the API specification. This article aims to accelerate your timeline for productively exploring the API and developing an integration."}),"\n",(0,a.jsx)(t.h2,{id:"about-the-management-api",children:"About the Management API"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.a,{href:"https://netfoundry.io/docs/openziti/learn/introduction/",children:"OpenZiti"})," controller provides an edge-management API for creating, reading, updating, and deleting (CRUD) OpenZiti resources, e.g., Services, Edge Router Policies, etc. The simplest way to use the edge-management API is through ",(0,a.jsxs)(t.a,{href:"https://netfoundry.io/docs/openziti/downloads#the-ziti-executable",children:["the ",(0,a.jsx)(t.code,{children:"ziti"})," CLI"]})," or ",(0,a.jsx)(t.a,{href:"https://github.com/openziti/ziti-console#readme",children:"the console"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"what-about-the-client-api",children:"What about the Client API?"}),"\n",(0,a.jsxs)(t.p,{children:["The edge-management API is distinct from the edge-client API. ",(0,a.jsx)(t.a,{href:"https://netfoundry.io/docs/openziti/reference/developer/sdk/",children:"Edge SDKs"})," use the edge-client API to authenticate and find services and routers. The OpenZiti Controller can be configured to provide both APIs on the same server port. Whether the two APIs are combined or split, their URL paths are discrete. You can learn more about both APIs in ",(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"the developer references"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"generated-clients",children:"Generated Clients"}),"\n",(0,a.jsxs)(t.p,{children:["Before you write an edge-management client, could you use the ",(0,a.jsxs)(t.a,{href:"https://github.com/openziti/edge-api/tree/main/rest_management_api_client",children:["Go client (",(0,a.jsx)(t.code,{children:"go-swagger"}),")"]})," or ",(0,a.jsxs)(t.a,{href:"https://github.com/openziti-test-kitchen/openziti-edge-management-python",children:["Python client (",(0,a.jsx)(t.code,{children:"openapi-generator"}),")"]})," generated from the specification? Those might save you some typing if you can adapt them to your purpose."]}),"\n",(0,a.jsx)(t.h2,{id:"get-the-openapi-20-specification",children:"Get the OpenAPI 2.0 Specification"}),"\n",(0,a.jsxs)(t.p,{children:["The best place to get the specification is your running OpenZiti Controller. That way, you know the specification matches the version you are using. The controller publishes the spec in the edge-management API at the path ",(0,a.jsx)(t.code,{children:"/edge/management/v1/swagger.json"}),". There's also a built-in API reference website at the path ",(0,a.jsx)(t.code,{children:"/edge/management/v1/docs"}),". If you don't have a running controller, browse ",(0,a.jsx)(t.a,{href:"https://netfoundry.io/docs/openziti/reference/developer/api/edge-management-reference",children:"the latest spec and API reference on the docs site"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"import-to-postman",children:"Import to Postman"}),"\n",(0,a.jsxs)(t.p,{children:['Click the "',(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"Import"}),'" button on your Postman Workspace and provide a file path or URL to the OpenZiti edge-management API specification.']}),"\n",(0,a.jsx)(t.h2,{id:"create-a-postman-environment",children:"Create a Postman Environment"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Create a Postman environment for this API. ",(0,a.jsx)(t.a,{href:"https://learning.postman.com/docs/sending-requests/managing-environments/",children:"Here's the Postman help for reference"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['Add a variable "',(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"baseUrl"}),"\" and assign the current value of your management API's URL. For example, if the API is listening on local port 1280, assign ",(0,a.jsx)(t.code,{children:"https://localhost:1280/edge/management/v1"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['Add another variable named "',(0,a.jsx)(t.strong,{children:"apiKey"}),'" without any value. This variable will be assigned by the "authenticate" request\'s test script.']}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"customize-the-authenticate-request",children:"Customize the Authenticate Request"}),"\n",(0,a.jsxs)(t.p,{children:['Modify the "',(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"authenticate"}),'" request to store your API session token in your Postman environment. All subsequent requests will use this bearer token.']}),"\n",(0,a.jsxs)(t.p,{children:['In the collection of requests that Postman generated from the spec, find the request named "',(0,a.jsx)(t.strong,{children:"authenticate"}),'" and select the POST operation named "',(0,a.jsx)(t.strong,{children:"Authenticate via a method supplied via a query string parameter"}),'."']}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['In the "',(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"Params"}),'" tab of the request, ensure you have a query param named "',(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"method"}),'" with the value "',(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"password"}),'".']}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Ensure the request path of the operation is now showing ",(0,a.jsx)(t.code,{children:"{{baseUrl}}/authenticate?method=password"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:'In the "Tests" tab of the request, add this Javascript.'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'var jsonData = JSON.parse(responseBody);\npm.environment.set("apiKey", jsonData.data.token);\n'})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['In the "',(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"Body"}),'" tab of the request, add JSON like this with your correct username and password for the management API.']}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n    "username": "admin",\n    "password": "Otz2q5gnYVSTkza2aJ1EUq72hGGiFvmZ"\n}\n'})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['Click the "',(0,a.jsx)(t.a,{href:"https://ziti-doc-git-kube-guide-openziti.vercel.app/docs/reference/developer/",children:"Send"}),'" button.']}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"You should have received an HTTP OK (200) response from the management API. Now you can send any other requests in the collection, and they will automatically use the token from your Postman environment."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var i=n(96540);const a={},o=i.createContext(a);function s(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:t},e.children)}},83164:e=>{e.exports=JSON.parse('{"permalink":"/docs/openziti/blog/postman-mgmt","source":"@site/blog/postman-and-the-management-api.md","title":"Postman and the Management API","description":"Postman can build a collection of API requests and has a friendly interface for walking the API specification. This article aims to accelerate your timeline for productively exploring the API and developing an integration.","date":"2023-03-02T15:08:04.000Z","tags":[{"inline":false,"label":"Postman","permalink":"/docs/openziti/blog/tags/postman","description":"Postman API client"},{"inline":false,"label":"Swagger","permalink":"/docs/openziti/blog/tags/swagger","description":"Swagger / OpenAPI tools"},{"inline":false,"label":"REST API","permalink":"/docs/openziti/blog/tags/rest-api","description":"REST APIs"},{"inline":false,"label":"OpenAPI","permalink":"/docs/openziti/blog/tags/openapi","description":"OpenAPI specification"},{"inline":false,"label":"Code Generation","permalink":"/docs/openziti/blog/tags/codegeneration","description":"Code generation content"}],"readingTime":3.46,"hasTruncateMarker":true,"authors":[{"name":"Kenneth Bingham","title":"Author","url":"https://github.com/qrkourier","imageURL":"https://avatars.githubusercontent.com/qrkourier","key":"KennethBingham","page":null}],"frontMatter":{"title":"Postman and the Management API","date":"2023-03-02T15:08:04.000Z","cuid":"cler8r24d000n09ichw8y48u8","slug":"postman-mgmt","authors":["KennethBingham"],"image":"@site/blogs/openziti/v1677732038328/f6149856-e282-4451-b1a4-f278eff9f11b.png","imageDark":"@site/blogs/openziti/v1677732038328/f6149856-e282-4451-b1a4-f278eff9f11b.png","ogimage":"/blogs/openziti/v1677731728423/ba352516-83a5-48a8-a41b-e028c2dad45e.png","tags":["postman","swagger","rest-api","openapi","codegeneration"]},"unlisted":false,"prevItem":{"title":"OpenAPI Python Clients","permalink":"/docs/openziti/blog/openapi-python-clients"},"nextItem":{"title":"The Road Ahead for zrok","permalink":"/docs/openziti/blog/the-road-ahead-for-zrok"}}')}}]);