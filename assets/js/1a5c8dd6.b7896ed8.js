"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[411],{6725:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>u,default:()=>x,frontMatter:()=>d,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"reference/tunnelers/linux/redhat-package","title":"Tunneling on RedHat and Fedora","description":"Installing the RPM Package","source":"@site/docs/reference/tunnelers/60-linux/20-redhat-package.mdx","sourceDirName":"reference/tunnelers/60-linux","slug":"/reference/tunnelers/linux/redhat-package","permalink":"/docs/reference/tunnelers/linux/redhat-package","draft":false,"unlisted":false,"editUrl":"https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/reference/tunnelers/60-linux/20-redhat-package.mdx","tags":[],"version":"current","lastUpdatedAt":1746457104000,"sidebarPosition":20,"frontMatter":{"title":"Tunneling on RedHat and Fedora","sidebar_label":"RedHat"},"sidebar":"docsSidebar","previous":{"title":"Debian","permalink":"/docs/reference/tunnelers/linux/debian-package"},"next":{"title":"Manual","permalink":"/docs/reference/tunnelers/linux/manual-installation"}}');var a=t(74848),i=t(28453),s=t(65537),l=t(79329),o=t(49584),c=t(62364);const d={title:"Tunneling on RedHat and Fedora",sidebar_label:"RedHat"},u=void 0,h={},p=[{value:"Installing the RPM Package",id:"installing-the-rpm-package",level:3},{value:"Red Hat",id:"red-hat",level:4},{value:"Fedora",id:"fedora",level:4},{value:"Amazon Linux",id:"amazon-linux",level:4},...c.RM,...o.RM];function m(e){const n={code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h3,{id:"installing-the-rpm-package",children:"Installing the RPM Package"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Create a repo file like ",(0,a.jsx)(n.code,{children:"/etc/yum.repos.d/openziti.repo"})," matching the OS."]}),"\n"]}),"\n",(0,a.jsxs)(s.A,{defaultValue:"RedHat",values:[{label:"Red Hat",value:"RedHat"},{label:"Fedora",value:"Fedora"},{label:"Amazon Linux",value:"Amazon"}],children:[(0,a.jsxs)(l.A,{value:"RedHat",children:[(0,a.jsx)(n.h4,{id:"red-hat",children:"Red Hat"}),(0,a.jsx)(n.p,{children:"Architectures available:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"x86_64"}),"\n"]}),(0,a.jsxs)(n.p,{children:["Use this repo with var ",(0,a.jsx)(n.code,{children:"$releasever"})," on CentOS 7, Rocky 8-9, and RHEL 7-9."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"[OpenZiti]\nname=OpenZiti\nbaseurl=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat$releasever/$basearch\nenabled=1\ngpgcheck=0\ngpgkey=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat$releasever/$basearch/repodata/repomd.xml.key\nrepo_gpgcheck=1\n"})})]}),(0,a.jsxs)(l.A,{value:"Fedora",children:[(0,a.jsx)(n.h4,{id:"fedora",children:"Fedora"}),(0,a.jsx)(n.p,{children:"Architectures available:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"x86_64"}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"[OpenZiti]\nname=OpenZiti\nbaseurl=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat9/$basearch\nenabled=1\ngpgcheck=0\ngpgkey=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat9/$basearch/repodata/repomd.xml.key\nrepo_gpgcheck=1\n"})})]}),(0,a.jsxs)(l.A,{value:"Amazon",children:[(0,a.jsx)(n.h4,{id:"amazon-linux",children:"Amazon Linux"}),(0,a.jsx)(n.p,{children:"Architectures available:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"x86_64"}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"[OpenZiti]\nname=OpenZiti\nbaseurl=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat8/$basearch\nenabled=1\ngpgcheck=0\ngpgkey=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat8/$basearch/repodata/repomd.xml.key\nrepo_gpgcheck=1\n"})})]})]}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Run ",(0,a.jsx)(n.code,{children:"sudo yum update"})," to refresh the repo data cache."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Run ",(0,a.jsx)(n.code,{children:"sudo yum install ziti-edge-tunnel"})," to install the RPM."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Enable and start the service"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"sudo systemctl enable --now ziti-edge-tunnel.service\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Add an Identity."}),"\n",(0,a.jsx)(c.Ay,{}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Configure the Resolver."}),"\n",(0,a.jsx)(o.Ay,{}),"\n"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},62364:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>i});var r=t(74848),a=t(28453);const i=[{value:"Add a Single Identity",id:"add-a-single-identity",level:3},{value:"Load Identities Directory",id:"load-identities-directory",level:3}];function s(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The tunneller can run with zero or more identities loaded, and needs at least one to make OpenZiti services available on\nthe host. Adding an identity means providing a JWT enrollment token which is used by the tunneller to obtain a client\ncertificate from the OpenZiti controller. ",(0,r.jsx)(n.a,{href:"/docs/learn/core-concepts/identities/overview",children:"Learn more about OpenZiti Identities"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"add-a-single-identity",children:"Add a Single Identity"}),"\n",(0,r.jsxs)(n.p,{children:["Root and members of group ",(0,r.jsx)(n.code,{children:"ziti"})," may add an identity without restarting."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:'sudo ziti-edge-tunnel add --jwt "$(< ./in-file.jwt)" --identity myIdentityName\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/learn/core-concepts/identities/enrolling",children:"Learn more about enrolling"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"load-identities-directory",children:"Load Identities Directory"}),"\n",(0,r.jsxs)(n.p,{children:["The tunneller will load all enrolled identities in the ",(0,r.jsx)(n.code,{children:"--identity-dir"})," directory at startup. The default location for\nidentities is is ",(0,r.jsx)(n.code,{children:"/opt/openziti/etc/identities"}),". Add enrolled identity files to this directory by copying the JSON file\ninto the directory and setting permissions for group ",(0,r.jsx)(n.code,{children:"ziti"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Linux package users may place enrollment tokens named ",(0,r.jsx)(n.code,{children:"*.jwt"})," in this directory for automatic enrollment at next\nstartup."]})}),"\n",(0,r.jsxs)(n.p,{children:["Ensure the identities directory and its contents are writable by group ",(0,r.jsx)(n.code,{children:"ziti"})," to allow the tunneler to manage identities, e.g., renew certificates, and not readable by others to protect the confidentiality of the identities."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"sudo chown -cR :ziti        /opt/openziti/etc/identities\nsudo chmod -cR ug=rwX,o-rwx /opt/openziti/etc/identities\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The tunneller process needs to be restarted if the contents of ",(0,r.jsx)(n.code,{children:"/opt/openziti/etc/identities"})," change."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"# package users can restart with systemd\nsudo systemctl restart ziti-edge-tunnel.service\n"})})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}},49584:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>i});var r=t(74848),a=t(28453);const i=[];function s(e){const n={code:"code",em:"em",p:"p",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ziti-edge-tunnel run"})," provides a built-in nameserver for the services it is authorized to dial. The nameserver is automatically configured by ",(0,r.jsx)(n.code,{children:"systemd-resolved"}),", if enabled."]}),"\n",(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.code,{children:"systemd-resolved"})," is not enabled, you must configure your resolver to query the tunneler's nameserver. Add Ziti's nameserver to the connection manager, e.g., NetworkManager, Netplan, or by directly editing ",(0,r.jsx)(n.code,{children:"/etc/resolv.conf"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"You may configure the system resolver to use the tunneler's nameserver as the first or only nameserver."}),"\n",(0,r.jsxs)(n.p,{children:["When the tunneler nameserver is the first of multiple nameservers and the requested DNS record does not match an authorized service's intercept domain name, it sets the query status to ",(0,r.jsx)(n.code,{children:"REFUSE"}),". This implies that the caller ",(0,r.jsx)(n.em,{children:"should"})," keep trying to resolve the domain name with other nameservers."]}),"\n",(0,r.jsxs)(n.p,{children:["To use the tunneler nameserver as the only nameserver, you must specify an upstream nameserver for recursion: ",(0,r.jsx)(n.code,{children:"ziti-edge-tunnel run --dns-upstream 208.67.222.222"}),". In this configuration, the query status from the upstream nameserver is returned, e.g., ",(0,r.jsx)(n.code,{children:"NXDOMAIN"})," if the domain name is not found in the tunneler nameserver or the upstream nameserver."]}),"\n",(0,r.jsxs)(n.p,{children:["The IP address of the nameserver (default: ",(0,r.jsx)(n.code,{children:"100.64.0.2"}),") is determined by the tunneler's dns-ip-range (default: ",(0,r.jsx)(n.code,{children:"100.64.0.1/10"}),")."]})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}},79329:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var r=t(34164);const a={tabItem:"tabItem_Ymn6"};var i=t(74848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,s),hidden:t,children:n})}},65537:(e,n,t)=>{t.d(n,{A:()=>k});var r=t(96540),a=t(34164),i=t(65627),s=t(56347),l=t(50372),o=t(30604),c=t(11861),d=t(78749);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:a}}=e;return{value:n,label:t,attributes:r,default:a}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const a=(0,s.W6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o.aZ)(i),(0,r.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(a.location.search);n.set(i,e),a.replace({...a.location,search:n.toString()})}),[i,a])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,i=h(e),[s,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:i}))),[c,u]=m({queryString:t,groupId:a}),[x,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,i]=(0,d.Dv)(t);return[a,(0,r.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:a}),f=(()=>{const e=c??x;return p({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{f&&o(f)}),[f]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),g(e)}),[u,g,i]),tabValues:i}}var g=t(9136);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function v(e){let{className:n,block:t,selectedValue:r,selectValue:s,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),d=e=>{const n=e.currentTarget,t=o.indexOf(n),a=l[t].value;a!==r&&(c(n),s(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:i}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{o.push(e)},onKeyDown:u,onClick:d,...i,className:(0,a.A)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:i}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===i));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function y(e){const n=x(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",f.tabList),children:[(0,b.jsx)(v,{...n,...e}),(0,b.jsx)(j,{...n,...e})]})}function k(e){const n=(0,g.A)();return(0,b.jsx)(y,{...e,children:u(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(96540);const a={},i=r.createContext(a);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);