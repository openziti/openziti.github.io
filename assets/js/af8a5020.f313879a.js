"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[3866],{55229:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>u,default:()=>m,frontMatter:()=>c,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"reference/tunnelers/linux/debian-package","title":"Tunneling on Debian GNU/Linux","description":"Installing the Debian Package","source":"@site/docs/reference/tunnelers/60-linux/10-debian-package.mdx","sourceDirName":"reference/tunnelers/60-linux","slug":"/reference/tunnelers/linux/debian-package","permalink":"/docs/reference/tunnelers/linux/debian-package","draft":false,"unlisted":false,"editUrl":"https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/reference/tunnelers/60-linux/10-debian-package.mdx","tags":[],"version":"current","lastUpdatedAt":1745950071000,"sidebarPosition":10,"frontMatter":{"title":"Tunneling on Debian GNU/Linux","sidebar_label":"Debian"},"sidebar":"docsSidebar","previous":{"title":"Linux Tunneller","permalink":"/docs/reference/tunnelers/linux/"},"next":{"title":"RedHat","permalink":"/docs/reference/tunnelers/linux/redhat-package"}}');var i=t(74848),s=t(28453),a=t(65537),l=t(79329),o=t(49584),d=t(62364);const c={title:"Tunneling on Debian GNU/Linux",sidebar_label:"Debian"},u=void 0,h={},p=[{value:"Installing the Debian Package",id:"installing-the-debian-package",level:3},{value:"Ubuntu",id:"ubuntu",level:4},{value:"Debian GNU/Linux",id:"debian-gnulinux",level:4},...d.RM,...o.RM];function x(e){const n={admonition:"admonition",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"installing-the-debian-package",children:"Installing the Debian Package"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Select an OS to see the appropriate steps."}),"\n"]}),"\n",(0,i.jsxs)(a.A,{defaultValue:"Ubuntu",values:[{label:"Ubuntu",value:"Ubuntu"},{label:"Debian GNU/Linux",value:"Debian"}],children:[(0,i.jsxs)(l.A,{value:"Ubuntu",children:[(0,i.jsx)(n.h4,{id:"ubuntu",children:"Ubuntu"}),(0,i.jsx)("br",{}),(0,i.jsx)(n.p,{children:"Architectures available:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"x86_64"}),"\n",(0,i.jsx)(n.li,{children:"arm64"}),"\n"]}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Please read this script to ensure it is safe before running it."})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"curl -sSLf https://get.openziti.io/tun/scripts/install-ubuntu.bash | bash\n"})})]}),(0,i.jsxs)(l.A,{value:"Debian",children:[(0,i.jsx)(n.h4,{id:"debian-gnulinux",children:"Debian GNU/Linux"}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Debian"}),(0,i.jsx)(n.th,{children:"UBUNTU_LTS"}),(0,i.jsx)(n.th,{children:"Archs"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"13 Trixie"}),(0,i.jsx)(n.td,{children:"jammy"}),(0,i.jsx)(n.td,{children:"x86_64, arm64"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"12 Bookworm"}),(0,i.jsx)(n.td,{children:"jammy"}),(0,i.jsx)(n.td,{children:"x86_64, arm64"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"11 Bullseye"}),(0,i.jsx)(n.td,{children:"focal"}),(0,i.jsx)(n.td,{children:"x86_64, arm64"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"10 Buster"}),(0,i.jsx)(n.td,{children:"bionic"}),(0,i.jsx)(n.td,{children:"x86_64"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"9 Stretch"}),(0,i.jsx)(n.td,{children:"xenial"}),(0,i.jsx)(n.td,{children:"x86_64"})]})]})]}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Refer to the table to find the Ubuntu release name that is the contemporary of the Debian release. Substitute the Ubuntu release name for ",(0,i.jsx)(n.code,{children:"jammy"})," in the ",(0,i.jsx)(n.code,{children:"/etc/apt/sources.list.d/openziti.list"})," file."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"UBUNTU_LTS=jammy\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Subscribe the system to the OpenZiti package repository for the UBUNTU_LTS specified above."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'echo "deb [signed-by=/usr/share/keyrings/openziti.gpg] https://packages.openziti.org/zitipax-openziti-deb-stable $UBUNTU_LTS main" \\\n| sudo tee /etc/apt/sources.list.d/openziti.list >/dev/null\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Install the package signing pubkey."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"curl -sSLf https://get.openziti.io/tun/package-repos.gpg \\\n| sudo gpg --dearmor --output /usr/share/keyrings/openziti.gpg\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Ensure the pubkey is readable by all."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"sudo chmod -c +r /usr/share/keyrings/openziti.gpg\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Refresh the package list and install ziti-edge-tunnel."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"sudo apt update\nsudo apt install ziti-edge-tunnel\n"})}),"\n"]}),"\n"]})]})]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Enable and start the service"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"sudo systemctl enable --now ziti-edge-tunnel.service\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add an Identity."}),"\n",(0,i.jsx)(d.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Configure the Resolver."}),"\n",(0,i.jsx)(o.Ay,{}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},62364:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var r=t(74848),i=t(28453);const s=[{value:"Add a Single Identity",id:"add-a-single-identity",level:3},{value:"Load Identities Directory",id:"load-identities-directory",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The tunneller can run with zero or more identities loaded, and needs at least one to make OpenZiti services available on\nthe host. Adding an identity means providing a JWT enrollment token which is used by the tunneller to obtain a client\ncertificate from the OpenZiti controller. ",(0,r.jsx)(n.a,{href:"/docs/learn/core-concepts/identities/overview",children:"Learn more about OpenZiti Identities"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"add-a-single-identity",children:"Add a Single Identity"}),"\n",(0,r.jsxs)(n.p,{children:["Root and members of group ",(0,r.jsx)(n.code,{children:"ziti"})," may add an identity without restarting."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:'sudo ziti-edge-tunnel add --jwt "$(< ./in-file.jwt)" --identity myIdentityName\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/learn/core-concepts/identities/enrolling",children:"Learn more about enrolling"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"load-identities-directory",children:"Load Identities Directory"}),"\n",(0,r.jsxs)(n.p,{children:["The tunneller will load all enrolled identities in the ",(0,r.jsx)(n.code,{children:"--identity-dir"})," directory at startup. The default location for\nidentities is is ",(0,r.jsx)(n.code,{children:"/opt/openziti/etc/identities"}),". Add enrolled identity files to this directory by copying the JSON file\ninto the directory and setting permissions for group ",(0,r.jsx)(n.code,{children:"ziti"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Linux package users may place enrollment tokens named ",(0,r.jsx)(n.code,{children:"*.jwt"})," in this directory for automatic enrollment at next\nstartup."]})}),"\n",(0,r.jsxs)(n.p,{children:["Ensure the identities directory is writable by group ",(0,r.jsx)(n.code,{children:"ziti"})," and not readable by others to protect the confidentiality of\nthe identities."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"sudo chown -cR :ziti        /opt/openziti/etc/identities\nsudo chmod -cR ug=rwX,o-rwx /opt/openziti/etc/identities\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The tunneller process needs to be restarted if the contents of ",(0,r.jsx)(n.code,{children:"/opt/openziti/etc/identities"})," change."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"# package users can restart with systemd\nsudo systemctl restart ziti-edge-tunnel.service\n"})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},49584:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var r=t(74848),i=t(28453);const s=[];function a(e){const n={code:"code",em:"em",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ziti-edge-tunnel run"})," provides a built-in nameserver for the services it is authorized to dial. The nameserver is automatically configured by ",(0,r.jsx)(n.code,{children:"systemd-resolved"}),", if enabled."]}),"\n",(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.code,{children:"systemd-resolved"})," is not enabled, you must configure your resolver to query the tunneler's nameserver. Add Ziti's nameserver to the connection manager, e.g., NetworkManager, Netplan, or by directly editing ",(0,r.jsx)(n.code,{children:"/etc/resolv.conf"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"You may configure the system resolver to use the tunneler's nameserver as the first or only nameserver."}),"\n",(0,r.jsxs)(n.p,{children:["When the tunneler nameserver is the first of multiple nameservers and the requested DNS record does not match an authorized service's intercept domain name, it sets the query status to ",(0,r.jsx)(n.code,{children:"REFUSE"}),". This implies that the caller ",(0,r.jsx)(n.em,{children:"should"})," keep trying to resolve the domain name with other nameservers."]}),"\n",(0,r.jsxs)(n.p,{children:["To use the tunneler nameserver as the only nameserver, you must specify an upstream nameserver for recursion: ",(0,r.jsx)(n.code,{children:"ziti-edge-tunnel run --dns-upstream 208.67.222.222"}),". In this configuration, the query status from the upstream nameserver is returned, e.g., ",(0,r.jsx)(n.code,{children:"NXDOMAIN"})," if the domain name is not found in the tunneler nameserver or the upstream nameserver."]}),"\n",(0,r.jsxs)(n.p,{children:["The IP address of the nameserver (default: ",(0,r.jsx)(n.code,{children:"100.64.0.2"}),") is determined by the tunneler's dns-ip-range (default: ",(0,r.jsx)(n.code,{children:"100.64.0.1/10"}),")."]})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},79329:(e,n,t)=>{t.d(n,{A:()=>a});t(96540);var r=t(34164);const i={tabItem:"tabItem_Ymn6"};var s=t(74848);function a(e){let{children:n,hidden:t,className:a}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,a),hidden:t,children:n})}},65537:(e,n,t)=>{t.d(n,{A:()=>k});var r=t(96540),i=t(34164),s=t(65627),a=t(56347),l=t(50372),o=t(30604),d=t(11861),c=t(78749);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:i}}=e;return{value:n,label:t,attributes:r,default:i}}))}(t);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:t}=e;const i=(0,a.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})}),[s,i])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,s=h(e),[a,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[d,u]=x({queryString:t,groupId:i}),[m,b]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,s]=(0,c.Dv)(t);return[i,(0,r.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:i}),j=(()=>{const e=d??m;return p({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{j&&o(j)}),[j]);return{selectedValue:a,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),b(e)}),[u,b,s]),tabValues:s}}var b=t(9136);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(74848);function f(e){let{className:n,block:t,selectedValue:r,selectValue:a,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.a_)(),c=e=>{const n=e.currentTarget,t=o.indexOf(n),i=l[t].value;i!==r&&(d(n),a(i))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{o.push(e)},onKeyDown:u,onClick:c,...s,className:(0,i.A)("tabs__item",j.tabItem,s?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:s}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=m(e);return(0,g.jsxs)("div",{className:(0,i.A)("tabs-container",j.tabList),children:[(0,g.jsx)(f,{...n,...e}),(0,g.jsx)(v,{...n,...e})]})}function k(e){const n=(0,b.A)();return(0,g.jsx)(y,{...e,children:u(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var r=t(96540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);