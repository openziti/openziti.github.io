"use strict";(self.webpackChunkdocusaurus_3=self.webpackChunkdocusaurus_3||[]).push([[1698],{44035:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>d,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"reference/tunnelers/windows/add-ids/ext-providers/ext-jwt-url","title":"By URL","description":"Adding an identity by URL is very straight-forward. Deliver the root URL of the OpenZiti controller to the user, and","source":"@site/docs/reference/tunnelers/02-windows/add-ids/ext-providers/40-ext-jwt-url.mdx","sourceDirName":"reference/tunnelers/02-windows/add-ids/ext-providers","slug":"/reference/tunnelers/windows/add-ids/ext-providers/ext-jwt-url","permalink":"/docs/reference/tunnelers/windows/add-ids/ext-providers/ext-jwt-url","draft":false,"unlisted":false,"editUrl":"https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/reference/tunnelers/02-windows/add-ids/ext-providers/40-ext-jwt-url.mdx","tags":[],"version":"current","lastUpdatedAt":1743426476000,"sidebarPosition":40,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"By JWT","permalink":"/docs/reference/tunnelers/windows/add-ids/ext-providers/ext-jwt"},"next":{"title":"Authenticating","permalink":"/docs/reference/tunnelers/windows/add-ids/ext-providers/authenticating"}}');var r=i(74848),s=i(28453),a=(i(27763),i(35358));i(70703),i(8343);const d={},o="By URL",l={},c=[...a.RM,{value:"Prerequisites",id:"prerequisites",level:2},{value:"Adding the Identity",id:"adding-the-identity",level:2},{value:"Authenticating",id:"authenticating",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"by-url",children:"By URL"})}),"\n",(0,r.jsx)(a.Ay,{}),"\n",(0,r.jsx)(t.p,{children:"Adding an identity by URL is very straight-forward. Deliver the root URL of the OpenZiti controller to the user, and\r\nsend them the following instructions."}),"\n",(0,r.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"OpenZiti Controller 1.2+"}),"\n",(0,r.jsx)(t.li,{children:"ZDEW 2.5.2+"}),"\n",(0,r.jsxs)(t.li,{children:["an ",(0,r.jsx)(t.code,{children:"external-jwt-provider"})," is properly configured"]}),"\n",(0,r.jsxs)(t.li,{children:["an identity exists with an ",(0,r.jsx)(t.code,{children:"external-id"})," field set to a value provided from the external provider"]}),"\n",(0,r.jsx)(t.li,{children:"the OpenZiti Controller is configured to serve a pre-configured trusted certificate. The certificate must be verifiable\r\nby the OS without additional information such as using a widely trusted CA or the Windows administrator has\r\nadded the certificate chain to the OS trust store"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"adding-the-identity",children:"Adding the Identity"}),"\n",(0,r.jsx)(t.p,{children:'To add an identity to Windows by URL, first start by clicking on the "ADD IDENTITY" button in the top right of the screen.\r\nAfter the context menu pops up, select the "With URL" option.'}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"With URL",src:i(61123).A+"",width:"475",height:"498"})}),"\n",(0,r.jsx)(t.p,{children:"A dialog will appear. Enter a valid https url to a controller and click"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"With URL",src:i(55754).A+"",width:"411",height:"486"})}),"\n",(0,r.jsx)(t.h2,{id:"authenticating",children:"Authenticating"}),"\n",(0,r.jsxs)(t.p,{children:["Once an identity is added for a network leveraging an external provider. ",(0,r.jsx)(t.a,{href:"./authenticating",children:"See Authenticating"}),"\r\nfor more details about how to authenticate to the network."]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},35358:(e,t,i)=>{i.d(t,{Ay:()=>d,RM:()=>s});var n=i(74848),r=i(28453);const s=[];function a(e){const t={code:"code",p:"p",...(0,r.R)(),...e.components};return(0,n.jsxs)(t.p,{children:["New with ZDEW 2.5.2+ and an OpenZiti Controller version 1.2+ is adding an identity to a Windows installation using\r\nexternally provided authentication. This process involves mapping an identity provided by an identity provider to\r\nan OpenZiti Identity using the ",(0,n.jsx)(t.code,{children:"external-id"})," field as well as configuring an ",(0,n.jsx)(t.code,{children:"ext-jwt-signer"}),"."]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},8343:(e,t,i)=>{i.d(t,{Ay:()=>d,RM:()=>s});var n=i(74848),r=i(28453);const s=[{value:"Saving a Default Provider",id:"saving-a-default-provider",level:3},{value:"Saving a Default Provider When Authenticated",id:"saving-a-default-provider-when-authenticated",level:4},{value:"Resetting a Default Provider",id:"resetting-a-default-provider",level:3},{value:"Non-Default Provider",id:"non-default-provider",level:3}];function a(e){const t={h3:"h3",h4:"h4",img:"img",p:"p",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:'If your network is configured with more than one external provider, a popup will be shown when clicking on\r\nthe "authorize IdP" icon. The popup will contain a list of the providers to select from. Choosing a provider from the\r\nlist will begin the authorization flow for the selected provider.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"more than one provider",src:i(63995).A+"",width:"419",height:"593"})}),"\n",(0,n.jsx)(t.h3,{id:"saving-a-default-provider",children:"Saving a Default Provider"}),"\n",(0,n.jsx)(t.p,{children:"When using external providers, it's likely users will want to assign a provider as a default. Before\r\nauthenticating, click on the detail entry for the given identity a default should be assigned to. A new screen will\r\nappear looking like the image shown below."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"more than one provider",src:i(85277).A+"",width:"426",height:"505"})}),"\n",(0,n.jsx)(t.p,{children:'To assign a default provider, click the desired provider and click the "Default provider?" checkbox. The UI will remember\r\nthe setting when it is clicked. There is no need to \'save\' this setting. When a default provider is selected on a network\r\nwith multiple providers, no popup will be shown when clicking the "authorize IdP" icon.'}),"\n",(0,n.jsx)(t.h4,{id:"saving-a-default-provider-when-authenticated",children:"Saving a Default Provider When Authenticated"}),"\n",(0,n.jsx)(t.p,{children:"If already authenticated, clicking on the Identity Detail page will show the services assigned and accessible to the user.\r\nThe default provider selection screen can be accessed by clicking the green oidc icon in the top left, shown below. This\r\nicon will toggle between default provider selection and service view."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"oidc / service detail toggle",src:i(34483).A+"",width:"403",height:"390"})}),"\n",(0,n.jsx)(t.h3,{id:"resetting-a-default-provider",children:"Resetting a Default Provider"}),"\n",(0,n.jsx)(t.p,{children:'To reset the default provider simply uncheck the "Default provider" checkbox. When first opening the identity details\r\npage, the default provider will be automatically selected. If another provider is highlighted, choose the default provider\r\nand uncheck the "Default provider" box. There is no need to \'save\' this setting, the values is stored immediately.'}),"\n",(0,n.jsx)(t.h3,{id:"non-default-provider",children:"Non-Default Provider"}),"\n",(0,n.jsx)(t.p,{children:'If a default provider has been selected, users may still elect to authenticate with a different provider. To use a\r\ndifferent provider than the default, open the identity details page and select the provider to authenticate with. Once\r\nselected, click "Authenticate With Provider" and the selected provider will be used to authenticate.'})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},70703:(e,t,i)=>{i.d(t,{Ay:()=>d,RM:()=>s});var n=i(74848),r=i(28453);const s=[];function a(e){const t={img:"img",p:"p",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"Once the JWT is accepted, a new identity will be added to the ZDEW. Initially, the identity will not be authorized and a\r\nnew icon will show up indicating the user needs to authorize via the external provider. If a single external provider is\r\nconfigured for this OpenZiti overlay network, clicking the icon will being the Auth Flow with PKCE process. During this\r\ntime, the ZDEW will be listening on port 20314."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Authenticating 1",src:i(88755).A+"",width:"423",height:"490"})}),"\n",(0,n.jsx)(t.p,{children:"After successfully completing the authentication with the external provider, the browser will redirect to the listening\r\nport and complete the authentication flow. The user will be shown a screen that looks similar to this. The first time\r\nthis screen is shown in a browser session, it will not automatically close. Subsequent authentication events should\r\nresult in the tab automatically closing."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"pkce-success",src:i(7157).A+"",width:"637",height:"343"})}),"\n",(0,n.jsx)(t.p,{children:"Assuming everything succeeds, the user will see the normal information shown by an authenticated identity."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"after-pkce-success.png",src:i(83517).A+"",width:"404",height:"89"})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},27763:(e,t,i)=>{i.d(t,{A:()=>w});var n=i(96540),r=i(34164),s=i(25246),a=i(9136),d=i(33535);const o={details:"details_lb9f",isBrowser:"isBrowser_bmU9",collapsibleContent:"collapsibleContent_i85q"};var l=i(74848);function c(e){return!!e&&("SUMMARY"===e.tagName||c(e.parentElement))}function h(e,t){return!!e&&(e===t||h(e.parentElement,t))}function u(e){let{summary:t,children:i,...u}=e;(0,s.A)().collectAnchor(u.id);const p=(0,a.A)(),f=(0,n.useRef)(null),{collapsed:g,setCollapsed:w}=(0,d.u)({initialState:!u.open}),[v,x]=(0,n.useState)(u.open),m=n.isValidElement(t)?t:(0,l.jsx)("summary",{children:t??"Details"});return(0,l.jsxs)("details",{...u,ref:f,open:v,"data-collapsed":g,className:(0,r.A)(o.details,p&&o.isBrowser,u.className),onMouseDown:e=>{c(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;c(t)&&h(t,f.current)&&(e.preventDefault(),g?(w(!1),x(!0)):w(!0))},children:[m,(0,l.jsx)(d.N,{lazy:!1,collapsed:g,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{w(e),x(!e)},children:(0,l.jsx)("div",{className:o.collapsibleContent,children:i})})]})}const p={details:"details_b_Ee"},f="alert alert--info";function g(e){let{...t}=e;return(0,l.jsx)(u,{...t,className:(0,r.A)(f,p.details,t.className)})}function w(e){const t=n.Children.toArray(e.children),i=t.find((e=>n.isValidElement(e)&&"summary"===e.type)),r=(0,l.jsx)(l.Fragment,{children:t.filter((e=>e!==i))});return(0,l.jsx)(g,{...e,summary:i,children:r})}},83517:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/windows-after-pkce-success-69dbb2c3127384034bf0259ccf80946c.png"},88755:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/windows-auth-1-cb265766adc9ecf123738b4a3ef84549.png"},63995:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/windows-more-than-one-provider-cea13ad903e5e9dfa15883d845a33734.png"},34483:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/windows-oidc-toggle-3e2e477e5ecbbaf0d4fb49c2ad96eaf7.png"},85277:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/windows-provider-prefs-126b09d6c2dd7118a350f912cc574755.png"},55754:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/windows-with-url-dialog-85434dabc1a2e53eafbc9254c61a4c41.png"},61123:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/windows-with-url-9628f952919f7ca5fb0c71951b70a522.png"},7157:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/zac-pkce-success-0c084b6d40923a40f820db884adf5492.png"},28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>d});var n=i(96540);const r={},s=n.createContext(r);function a(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);